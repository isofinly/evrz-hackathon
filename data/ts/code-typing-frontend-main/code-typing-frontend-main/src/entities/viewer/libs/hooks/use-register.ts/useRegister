useRegister = () => {
    const { loginViewer } = useViewer()
    const toast = useToast()
    const navigate = useNavigate()

    const errorHandler = useAxiosErrorToast()

    return useMutation({
        mutationFn: (credentials: RegisterCredentials) => ViewerService.register(credentials),
        onSuccess: async access => {
            loginViewer(access)
            toast({
                title: "Registration successful",
                status: "success"
            })
            navigate(paths.typingCodePage, { replace: true })
        },
        onError: errorHandler
    })
}