PrivatePage = ({ children }: { children: ReactNode }) => {
    const { mutate: refreshMutate, isPending } = useRefresh()
    const navigate = useNavigate()
    const { isAuthenticated, loginViewer } = useViewer()

    useEffect(() => {
        refreshMutate(undefined, {
            onSuccess: access => {
                loginViewer(access)
            },
            onError: () => {
                navigate(paths.loginPage)
            }
        })
    }, [])

    if (isPending)
        return (
            <CodeLoading>
                <CodeLoadingTitle />
                <CodeLoadingProgress />
            </CodeLoading>
        )

    return isAuthenticated ? children : null
}