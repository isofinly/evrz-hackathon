ViewerProvider = ({ children }: { children: ReactNode }) => {
    const [viewer, setViewer] = useState<{ isAuthenticated: boolean; accessToken?: string }>({
        isAuthenticated: false
    })

    const handleLoginViewer = (accessToken: string) => {
        setViewer({
            isAuthenticated: true,
            accessToken
        })
        tokenService.setAccessToken(accessToken)
    }

    const handleLogoutViewer = () => {
        setViewer({
            isAuthenticated: false,
            accessToken: undefined
        })
        tokenService.deleteAccessToken()
    }

    return (
        <ViewerContext.Provider
            value={{
                ...viewer,
                loginViewer: handleLoginViewer,
                logoutViewer: handleLogoutViewer
            }}
        >
            {children}
        </ViewerContext.Provider>
    )
}