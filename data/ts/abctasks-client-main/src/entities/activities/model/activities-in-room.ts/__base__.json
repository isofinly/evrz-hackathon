{"start_line": 0, "code": "// <REVIEW>\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0444\u0430\u0439\u043b\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 CamelCase</REVIEW>\n\nimport { cache, createQuery, keepFresh } from '@farfetched/core';\n\nimport { runtypeContract } from '@farfetched/runtypes';\n\nimport { createDomain } from 'effector';\n\nimport { interval } from 'patronum';\n\n\nimport {\n\n\tActivity,\n\n\tactivity,\n\n\tGetActivitiesInRoomParams,\n\n\tactivitiesApi,\n\n} from '@/shared/api';\n\nimport { dataExtractor } from '@/shared/lib';\n\nimport {\n\n\tStandardResponse,\n\n\tgetStandardResponse,\n\n\tPaginationResponse,\n\n\tgetPaginationResponse,\n\n} from '@/shared/types';\n\n\n// <REVIEW>\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0434\u043e\u043c\u0435\u043d\u0430 \u0434\u043b\u044f \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u043f\u043e \u043f\u0443\u0442\u0438 /src/Model/{\u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435}/state.ts </REVIEW>\nconst activitiesDomain = createDomain();\n\nconst handlerFx = activitiesDomain.effect<\n\n\tGetActivitiesInRoomParams,\n\n\tStandardResponse<PaginationResponse<Activity>>\n\n>(activitiesApi.getAll);\n\n\nexport const query = createQuery<\n\n\tGetActivitiesInRoomParams,\n\n\tStandardResponse<PaginationResponse<Activity>>,\n\n\tError,\n\n\tStandardResponse<PaginationResponse<Activity>>,\n\n\tPaginationResponse<Activity>\n\n>({\n\n\tinitialData: { items: [], totalCount: 0, limit: 50 },\n\n\teffect: handlerFx,\n\n\tcontract: runtypeContract(\n\n\t\tgetStandardResponse(getPaginationResponse(activity))\n\n\t),\n\n\tmapData: dataExtractor,\n\n});\n\n\nexport const $hasItems = query.$data.map((data) => !!data.totalCount);\n\nexport const $pageCount = query.$data.map((data) =>\n\n\tMath.ceil(data.totalCount / data.limit)\n\n);\n\n\ncache(query);\n\n\nkeepFresh(query, {\n\n\ttriggers: [interval({ timeout: 5000 })],\n\n});\n"}