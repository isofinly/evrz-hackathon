



import { TextFieldProps } from '@mui/material';

import {
	DatePicker as MUIDatePicker,
	DatePickerProps as MUIDatePIckerProps,
} from '@mui/x-date-pickers';
import dayjs, { Dayjs } from 'dayjs';
import * as React from 'react';

import { CommonProps } from '@/shared/types';

import { Field, FieldProps } from '../field';

type FieldKeys = 'value' | 'onBlur' | 'name' | 'isValid' | 'helperText';

export interface DatePickerProps
	extends CommonProps,
		Pick<FieldProps, FieldKeys>,
		Omit<MUIDatePIckerProps<Dayjs>, FieldKeys | 'onChange'> <BODY DatePickerProps>

export const DatePicker = React.memo(
	(props: DatePickerProps): React.ReactElement => {
		const { onChange, value, isValid, name, onBlur, helperText, ...rest } =
			props;
		const preparedValue = dayjs(value);
		const handleChange: MUIDatePIckerProps<Dayjs>['onChange'] = (date) => <BODY handleChange>;

		const textField = (params: TextFieldProps) => <BODY textField>;

		return (
			<MUIDatePicker
				{...rest}
				value={preparedValue}
				onChange={handleChange}
				slots={{
					textField,
				}}
			/>
		);
	}
);