MenuItem = <P extends object>(
	props: React.PropsWithChildren<MenuItemProps<P>>
) => {
	const { onClose } = useMenuContext();

	const { label, icon, onClick, to, params, query, ...rest } = props;

	const handleClick: React.MouseEventHandler<HTMLButtonElement> = (event) => {
		if (onClick) {
			onClick(event);
		}

		if (onClose) {
			onClose();
		}
	};

	const itemButtonProps = to
		? { component: Link, to, params, query, onClick: handleClick }
		: { onClick: handleClick };
	return (
		<MUIMenuItem {...rest} {...(itemButtonProps as any)}>
			{icon ? <ListItemIcon>{icon}</ListItemIcon> : null}
			{label}
		</MUIMenuItem>
	);
}