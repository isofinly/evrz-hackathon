{"start_line": 0, "code": "/* eslint-disable import/no-extraneous-dependencies */\n\nimport * as path from 'node:path';\n\n\nimport { babel } from '@rollup/plugin-babel';\n\nimport react from '@vitejs/plugin-react';\n\nimport { VitePWA } from 'vite-plugin-pwa';\n\nimport { defineConfig, loadEnv, splitVendorChunkPlugin } from 'vite';\n\nimport { viteStaticCopy } from 'vite-plugin-static-copy';\n\n\nconst localeFileRegexp = /src\\/([\\w-/ ])*\\/([\\w-]+)\\/([\\w-]+)\\.json$/;\n\n\nexport default defineConfig(({ mode }) => {\n\n\tconst env = loadEnv(mode, '.', '');\n\n\tconst __PROD__ = mode === 'production';\n\n\n\tconst plugins = [\n\n\t\treact(),\n\n\t\tbabel({\n\n\t\t\tbabelrc: true,\n\n\t\t\tconfigFile: true,\n\n\t\t\tbabelHelpers: 'bundled',\n\n\t\t\tbrowserslistConfigFile: true,\n\n\t\t\textensions: ['.ts', '.tsx'],\n\n\t\t}),\n\n\t\tsplitVendorChunkPlugin(),\n\n\t\tviteStaticCopy({\n\n\t\t\ttargets: [\n\n\t\t\t\t{\n\n\t\t\t\t\tsrc: 'src/**/locales/**/*.json',\n\n\t\t\t\t\trename: (_name, _extension, path) => {\n\n\t\t\t\t\t\tconst matches = path.match(localeFileRegexp);\n\n\n\t\t\t\t\t\tif (matches.length < 4) {\n\n\t\t\t\t\t\t\treturn '';\n\n\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\tconst [, , language, namespace] = matches;\n\n\n\t\t\t\t\t\treturn `${language}/${namespace}.json`;\n\n\t\t\t\t\t},\n\n\t\t\t\t\tdest: 'locales',\n\n\t\t\t\t},\n\n\t\t\t],\n\n\t\t}),\n\n\t];\n\n\n\tif (__PROD__) {\n\n\t\tplugins.push(\n\n\t\t\tVitePWA({\n\n\t\t\t\tregisterType: 'autoUpdate',\n\n\t\t\t\tmanifest: {\n\n\t\t\t\t\tname: 'ABCTasks',\n\n\t\t\t\t\tshort_name: 'ABC',\n\n\t\t\t\t\tdescription:\n\n\t\t\t\t\t\t'Simple and functional task manager. It is great for single and team usage.',\n\n\t\t\t\t\tscreenshots: [\n\n\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\tsrc: 'screenshots/rooms-light-desktop.webp',\n\n\t\t\t\t\t\t\tsizes: '1280x720',\n\n\t\t\t\t\t\t\ttype: 'image/webp',\n\n\t\t\t\t\t\t\tform_factor: 'wide',\n\n\t\t\t\t\t\t\tlabel: 'Rooms list of user in light scheme',\n\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\tsrc: 'screenshots/rooms-dark-desktop.webp',\n\n\t\t\t\t\t\t\tsizes: '1280x720',\n\n\t\t\t\t\t\t\ttype: 'image/webp',\n\n\t\t\t\t\t\t\tform_factor: 'wide',\n\n\t\t\t\t\t\t\tlabel: 'Rooms list of user in dark scheme',\n\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\tsrc: 'screenshots/tasks-light-desktop.webp',\n\n\t\t\t\t\t\t\tsizes: '1280x720',\n\n\t\t\t\t\t\t\ttype: 'image/webp',\n\n\t\t\t\t\t\t\tform_factor: 'wide',\n\n\t\t\t\t\t\t\tlabel: 'Tasks page of user in light scheme',\n\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\tsrc: 'screenshots/tasks-dark-desktop.webp',\n\n\t\t\t\t\t\t\tsizes: '1280x720',\n\n\t\t\t\t\t\t\ttype: 'image/webp',\n\n\t\t\t\t\t\t\tform_factor: 'wide',\n\n\t\t\t\t\t\t\tlabel: 'Tasks page of user in dark scheme',\n\n\t\t\t\t\t\t},\n\n\n\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\tsrc: 'screenshots/rooms-light-mobile.webp',\n\n\t\t\t\t\t\t\tsizes: '360x720',\n\n\t\t\t\t\t\t\ttype: 'image/webp',\n\n\t\t\t\t\t\t\tform_factor: 'narrow',\n\n\t\t\t\t\t\t\tlabel: 'Rooms list of user in light scheme',\n\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\tsrc: 'screenshots/rooms-dark-mobile.webp',\n\n\t\t\t\t\t\t\tsizes: '360x720',\n\n\t\t\t\t\t\t\ttype: 'image/webp',\n\n\t\t\t\t\t\t\tform_factor: 'narrow',\n\n\t\t\t\t\t\t\tlabel: 'Rooms list of user in dark scheme',\n\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\tsrc: 'screenshots/tasks-light-mobile.webp',\n\n\t\t\t\t\t\t\tsizes: '360x720',\n\n\t\t\t\t\t\t\ttype: 'image/webp',\n\n\t\t\t\t\t\t\tform_factor: 'narrow',\n\n\t\t\t\t\t\t\tlabel: 'Tasks page of user in light scheme',\n\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\tsrc: 'screenshots/tasks-dark-mobile.webp',\n\n\t\t\t\t\t\t\tsizes: '360x720',\n\n\t\t\t\t\t\t\ttype: 'image/webp',\n\n\t\t\t\t\t\t\tform_factor: 'narrow',\n\n\t\t\t\t\t\t\tlabel: 'Tasks page of user in dark scheme',\n\n\t\t\t\t\t\t},\n\n\t\t\t\t\t],\n\n\t\t\t\t\ticons: [\n\n\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\tsrc: 'images/icon-48.webp',\n\n\t\t\t\t\t\t\ttype: 'image/webp',\n\n\t\t\t\t\t\t\tsizes: '48x48',\n\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\tsrc: 'images/icon-256.webp',\n\n\t\t\t\t\t\t\ttype: 'image/webp',\n\n\t\t\t\t\t\t\tsizes: '256x256',\n\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\tsrc: 'images/icon-512.webp',\n\n\t\t\t\t\t\t\ttype: 'image/webp',\n\n\t\t\t\t\t\t\tsizes: '512x512',\n\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\tsrc: 'images/icon.svg',\n\n\t\t\t\t\t\t\tsizes: 'any',\n\n\t\t\t\t\t\t},\n\n\t\t\t\t\t],\n\n\t\t\t\t\tstart_url: '.',\n\n\t\t\t\t\tscope: '/',\n\n\t\t\t\t\tdisplay: 'standalone',\n\n\t\t\t\t\ttheme_color: '#f5f5f5',\n\n\t\t\t\t\tbackground_color: '#f5f5f5',\n\n\t\t\t\t\tcategories: ['productivity', 'personalization', 'lifestyle'],\n\n\t\t\t\t},\n\n\t\t\t})\n\n\t\t);\n\n\t}\n\n\n\treturn {\n\n\t\tbuild: {\n\n\t\t\tsourcemap: true,\n\n\t\t},\n\n\t\tserver: {\n\n\t\t\tport: 3000,\n\n\t\t\tcors: true,\n\n\t\t\tproxy: {\n\n\t\t\t\t'/api': {\n\n\t\t\t\t\tchangeOrigin: true,\n\n\t\t\t\t\ttarget: env.API_HOST,\n\n\t\t\t\t\trewrite: (url) => url.replace('/api', ''),\n\n\t\t\t\t},\n\n\t\t\t},\n\n\t\t},\n\n\t\tpreview: {\n\n\t\t\tport: 3000,\n\n\t\t\tcors: true,\n\n\t\t\tproxy: {\n\n\t\t\t\t'/api': {\n\n\t\t\t\t\tchangeOrigin: true,\n\n\t\t\t\t\ttarget: env.API_HOST,\n\n\t\t\t\t\trewrite: (url) => url.replace('/api', ''),\n\n\t\t\t\t},\n\n\t\t\t},\n\n\t\t},\n\n\t\tresolve: {\n\n\t\t\talias: {\n\n\t\t\t\t'@': path.resolve(__dirname, 'src'),\n\n\t\t\t},\n\n\t\t},\n\n\t\tcss: {\n\n\t\t\tdevSourcemap: true,\n\n\t\t},\n\n\t\tplugins,\n\n\t};\n\n});\n"}