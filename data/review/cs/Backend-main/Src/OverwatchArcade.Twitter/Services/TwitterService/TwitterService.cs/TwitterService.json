{"embedding": [-0.18659460544586182, -0.738605797290802, -0.6812251210212708, 0.014277277514338493, 0.29348164796829224, -0.5807814598083496, -0.46599721908569336, 0.5204989910125732, 0.04930911213159561, 0.9402490258216858, 0.24004368484020233, 0.5543526411056519, -0.1883445829153061, -0.13041871786117554, -0.2571713626384735, 0.35163614153862, 0.401834636926651, 0.7509739398956299, 0.07879329472780228, -0.8449784517288208, 0.28428763151168823, -0.24834300577640533, -0.43836405873298645, -0.4188372492790222, -0.08292291313409805, 0.3054673373699188, -0.14660896360874176, -0.18774041533470154, -0.4547775685787201, 0.1177990660071373, -0.08357176929712296, -0.32337144017219543, 0.17934639751911163, 0.8314840793609619, 0.1045033261179924, -0.2159872055053711, -0.3596075177192688, 0.41046571731567383, -1.2521255016326904, 0.20755061507225037, -0.061428334563970566, -0.127862349152565, 0.4773203432559967, 0.1046082079410553, 0.11525589972734451, 0.4348685145378113, -0.17413237690925598, 0.7798935174942017, -0.1864197999238968, -0.5510358214378357, -0.38470497727394104, 0.048726633191108704, -0.42702916264533997, 0.48508399724960327, 0.10653626173734665, 0.7913589477539062, -0.2016867697238922, 0.565319299697876, -0.5052339434623718, -0.49024105072021484, -0.2603393793106079, -0.22677156329154968, 0.1373029500246048, 1.0445094108581543, 0.8875759243965149, -0.056687451899051666, -0.32860592007637024, 0.6642972826957703, 0.27460408210754395, 0.014635994099080563, 0.9430447220802307, -0.08596033602952957, -0.5388498902320862, -0.6428093314170837, 0.34512844681739807, -0.36767736077308655, 0.41805607080459595, -0.5067347884178162, -0.061008986085653305, 0.29763907194137573, 0.04321620240807533, 0.03561950474977493, 0.4726218283176422, -0.03084546886384487, 1.6268579959869385, -0.35660791397094727, 0.49152234196662903, -0.7502501606941223, -1.086052417755127, -0.14980600774288177, -0.45018747448921204, -0.30954790115356445, -0.028581373393535614, -0.769333004951477, -0.07758040726184845, -0.5479320287704468, -0.3628588616847992, -0.47733548283576965, -0.24406138062477112, -0.5573945045471191, -0.44291165471076965, 0.22076812386512756, 0.1535007208585739, -0.06488912552595139, 0.7926301956176758, -0.010517867282032967, -0.04398347809910774, 0.1347658336162567, -0.6181511878967285, 0.06132231652736664, -0.3589509427547455, -0.18088164925575256, 0.3737216889858246, 0.6333239078521729, 0.36453574895858765, -0.6509943008422852, 0.2716560959815979, 0.21385425329208374, 0.5176594853401184, -0.05039837956428528, 0.34436073899269104, 0.5299468636512756, -0.15106971561908722, -0.30446627736091614, -0.08207162469625473, 0.2606967091560364, -0.30650800466537476, 0.46927961707115173, 0.14532367885112762, -0.06327369064092636, -0.590687096118927, 0.07925345748662949, 0.47853219509124756, 0.5598791837692261, 0.0465516522526741, 0.38090845942497253, 0.2835714817047119, 0.7043353915214539, -0.27405673265457153, 0.33999893069267273, 0.22283782064914703, -0.16873563826084137, -0.482505738735199, 0.17851750552654266, 0.48862648010253906, -0.026330403983592987, -0.9890671968460083, -0.25377652049064636, 0.3035176694393158, -0.23570574820041656, -0.018618842586874962, -0.42814478278160095, -0.30478617548942566, 0.3559037744998932, -0.07014776766300201, -0.7723374366760254, 0.02878107689321041, 0.1663048267364502, 0.01381166372448206, 0.05991777032613754, 0.38534462451934814, -0.2215232402086258, 0.7490378618240356, -0.2022835612297058, 0.035937923938035965, 0.6630581617355347, 0.4093872010707855, 0.8703687191009521, 0.1796848326921463, 0.3177882730960846, -0.21043701469898224, 0.2790723443031311, -0.12494834512472153, -0.07279332727193832, -0.35641539096832275, 0.5300357341766357, 0.2566240131855011, -0.1683017462491989, -0.2846188247203827, -0.21844527125358582, -0.6575638651847839, -0.6712717413902283, -0.1116802915930748, -0.8759270906448364, 0.1295682191848755, 0.44788843393325806, 0.26169756054878235, 0.47788089513778687, -0.7292595505714417, 0.5516110062599182, -0.4469201862812042, 0.29440611600875854, 0.37571805715560913, 0.44156941771507263, 0.756569504737854, 0.18087227642536163, 0.059683334082365036, -0.2314639389514923, 0.48370361328125, -0.16441002488136292, -0.36015060544013977, 0.06656969338655472, 0.8292780518531799, 0.14949525892734528, 0.6551074385643005, -0.26711344718933105, -0.3785104751586914, 0.16775605082511902, -0.5743172764778137, -0.3106236755847931, -0.914021909236908, 0.12119140475988388, -0.07073386013507843, 0.38045534491539, 0.6335336565971375, -0.7875526547431946, 0.9478713870048523, 0.01832626946270466, 0.6653487086296082, 0.272617369890213, 0.33675476908683777, 0.29943037033081055, -0.34825414419174194, 0.0638837069272995, 0.35235679149627686, 0.5933825373649597, 0.24817657470703125, 0.3169717490673065, 0.39576706290245056, -0.007922346703708172, -0.1569928675889969, 0.3562356233596802, 0.0016006012447178364, 0.664583683013916, 0.15010786056518555, -0.706389844417572, -0.38560250401496887, -0.1997700333595276, 0.1343567967414856, 0.06645882874727249, 0.22379253804683685, 0.13768765330314636, 0.11328713595867157, -0.15103815495967865, -0.05936427786946297, 0.010335007682442665, 0.1002906784415245, 0.06390883773565292, -0.0765143409371376, -0.6834299564361572, 0.052704889327287674, 0.13254547119140625, -0.05529853701591492, -0.5113618969917297, -0.17800380289554596, -0.373800128698349, 0.322538286447525, -0.28598880767822266, -0.07379122823476791, -0.03022485226392746, 0.7144550681114197, -0.2781909704208374, -0.4195515513420105, 0.49089816212654114, -0.6180894374847412, -0.9400898218154907, 0.017876747995615005, 0.09786099195480347, -0.1530408412218094, -0.2309025228023529, 0.30990421772003174, 0.3538205623626709, -0.026485657319426537, -0.42000508308410645, -0.48818105459213257, -0.1771441102027893, -0.09688104689121246, 0.26990067958831787, -0.7161670327186584, -0.6078141927719116, 0.028452197089791298, -0.3150196373462677, 0.5207832455635071, 0.2494683861732483, 0.7229276895523071, 0.29182955622673035, 0.4014410674571991, -0.08565498888492584, 0.13006123900413513, -0.1350286602973938, -0.12108388543128967, -0.5599749088287354, 0.8651022911071777, 0.11702851206064224, -0.2855665981769562, -0.47738662362098694, -0.25332313776016235, -0.030684759840369225, 0.14101411402225494, -0.25364282727241516, 0.12795010209083557, 0.2112438976764679, 0.5653066635131836, -0.31408241391181946, 0.05772765725851059, -0.2432543933391571, 0.7248855233192444, 0.04571272432804108, 0.5714520812034607, -0.7227746844291687, 0.4717652499675751, -0.5092633962631226, -0.41114094853401184, 0.14633573591709137, 0.01756875030696392, 0.11439424753189087, 0.0026061604730784893, -0.3184579908847809, -0.2584419846534729, 0.5637922883033752, -0.40901023149490356, 0.39050358533859253, 0.9846252799034119, -0.04389140382409096, 0.575698971748352, -0.9179535508155823, 0.21551145613193512, 0.3144960105419159, -0.691043496131897, 0.21915385127067566, -0.3026089072227478, -0.33356088399887085, -0.5466979146003723, -0.04053351283073425, -0.5101659893989563, -0.16853101551532745, -0.1465623676776886, -0.1826331615447998, 0.2661822736263275, -0.2502497136592865, -0.45191723108291626, -0.3042718768119812, 0.14259818196296692, 0.9664638638496399, -0.20078575611114502, 0.15906769037246704, 0.47623729705810547, -0.05984307453036308, 0.6250782012939453, 0.6840066313743591, 0.901394248008728, 0.7541618943214417, 0.4464680552482605, 0.9239067435264587, 0.7040423154830933, -0.011262488551437855, -0.27613168954849243, 0.05764545127749443, 0.28243714570999146, -0.7803528308868408, -1.0155985355377197, -0.10706786811351776, 0.1928674429655075, 0.4981837570667267, -0.4781752824783325, 0.40563949942588806, -0.0016563310055062175, -0.11993787437677383, -0.07109345495700836, -0.44753381609916687, -0.16800923645496368, -0.28172701597213745, -0.42489054799079895, 0.5082667469978333, 0.8139024972915649, -0.0001737013371894136, 0.0857497826218605, -0.10105741024017334, 0.26080116629600525, 0.6938168406486511, 0.4323275089263916, 0.46845993399620056, 0.1058618575334549, -0.38744795322418213, -0.06624575704336166, -0.14432749152183533, 0.11933710426092148, -0.43441733717918396, 0.16019567847251892, -0.3610967993736267, -0.07274633646011353, -0.10233727097511292, 0.2065715491771698, -0.1578228622674942, 0.04753100126981735, -0.2266581952571869, -0.660260796546936, 0.2255309522151947, 0.3368977904319763, -0.3715161383152008, 0.3856760263442993, 0.24509160220623016, 0.25636523962020874, 0.6044802069664001, 0.13668419420719147, 0.45275697112083435, -0.12582778930664062, 0.25681963562965393, 0.36219361424446106, 0.4269738495349884, -0.6156648993492126, -0.43478307127952576, 0.30988794565200806, 0.06396059691905975, -0.17334339022636414, 0.032145097851753235, -0.6246029138565063, 0.04291491582989693, -0.24854634702205658, 0.48704683780670166, -0.3296540677547455, 0.33578360080718994, 0.2528148889541626, 0.3485199809074402, 0.21284601092338562, -0.09725762903690338, -0.0995725616812706, -0.0820462703704834, -0.4164261221885681, -0.20573298633098602, 0.02967560850083828, 0.034783802926540375, -0.8166196346282959, -0.4766457974910736, 0.5257118940353394, 0.32824376225471497, -0.47943687438964844, 0.3702589273452759, 0.19867485761642456, -0.31317245960235596, -0.07941082119941711, -0.46599116921424866, 0.2242792248725891, -0.37794816493988037, 0.5684512257575989, -0.13374318182468414, -0.03619951382279396, -0.06981302052736282, 0.2723829746246338, -0.3475053906440735, -0.7164710164070129, 0.1177603155374527, -0.14997702836990356, 0.6286304593086243, -0.31587478518486023, 0.17777977883815765, 0.15442728996276855, -0.005715722683817148, -0.16298872232437134, -0.37010231614112854, 0.017080483958125114, 0.11295559257268906, -0.3416164219379425, -0.10658831149339676, 0.34449291229248047, 0.03218623623251915, 0.7612998485565186, -0.26141905784606934, 0.2940013110637665, 0.21214589476585388, 0.5012585520744324, -0.27034488320350647, 0.12471913546323776, -0.06498975306749344, 0.031312622129917145, -0.23132336139678955, 0.6820991039276123, 0.1608382761478424, 0.2887604534626007, 0.3707159161567688, 0.49476557970046997, -0.13017268478870392, -0.04698803648352623, -0.3490228056907654, 0.09724947810173035, -0.3389509618282318, -0.8424569964408875, -0.4280281662940979, 0.7474426031112671, -0.045249249786138535, -0.3085207939147949, -0.02173830382525921, 0.511329710483551, 0.47461941838264465, -1.0391250848770142, -0.20539018511772156, -0.7313002347946167, 0.22177329659461975, 0.6863671541213989, -0.7439899444580078, 0.5214937925338745, 0.35498619079589844, -0.25879234075546265, 0.43336623907089233, 0.4733852446079254, -0.15605977177619934, -0.48839953541755676, -0.1193675771355629, -0.23129673302173615, -0.42122671008110046, -0.3888125419616699, -0.25637286901474, 0.12626652419567108, -0.08820571005344391, 0.06937059760093689, -0.8209322094917297, -0.4676326811313629, 0.08269427716732025, 0.1092149093747139, -0.39865225553512573, 0.49126893281936646, 0.499198853969574, -0.05705397203564644, 0.5635531544685364, -0.3406153619289398, 0.0828196182847023, 0.4634828269481659, 0.33604371547698975, 0.537091851234436, 1.0707590579986572, 0.01521469559520483, -0.2221473902463913, -0.06373154371976852, -0.9405978918075562, 0.35516372323036194, 0.09285980463027954, -1.5418940782546997, -1.1772503852844238, -0.29953524470329285, 0.037217285484075546, -0.3994831144809723, -0.3001181185245514, -0.4981693923473358, -1.1304837465286255, -1.0121560096740723, 0.29485470056533813, -0.1844530701637268, 0.04419223591685295, -0.2922225296497345, -0.2882245182991028, 1.456614375114441, -0.06765587627887726, 0.8119093775749207, 0.22240696847438812, -0.994430661201477, -0.06631319969892502, -0.31703776121139526, -0.6719202399253845, 0.3966441750526428, 0.05711812153458595, -0.46970775723457336, -0.11660381406545639, -0.10809305310249329, 0.28070366382598877, -0.17284412682056427, 0.20703674852848053, -0.1725408136844635, -0.02589412033557892, -0.6182774901390076, 0.0039947740733623505, 0.046996258199214935, -0.36723592877388, 0.23092523217201233, -0.022880971431732178, -0.8141235709190369, 0.40314048528671265, 0.16172541677951813, -1.1648266315460205, 0.7226778864860535, 0.3292462229728699, 0.4557601511478424, -0.10356156527996063, 0.1632952243089676, -0.9747768044471741, -0.35256367921829224, 0.05817541107535362, 0.5429461002349854, -0.0736970454454422, -0.07754248380661011, -0.2732956111431122, -0.46342501044273376, 0.4702622890472412, -0.1255977600812912, -0.03282328322529793, 0.002894871635362506, 0.45325925946235657, 0.414995014667511, -0.2750370502471924, -0.10590778291225433, 0.6914345026016235, 0.527553379535675, 0.515256404876709, -0.6056995391845703, 0.3071598708629608, 0.47341087460517883, -0.0656474307179451, -0.7194123864173889, -0.17878879606723785, 0.6046801209449768, -0.2103404402732849, -0.49593260884284973, -0.2900446355342865, 0.6668939590454102, -0.38177230954170227, 0.36379891633987427, -0.07226264476776123, -0.5957560539245605, 0.543779730796814, 0.22053495049476624, -0.028903305530548096, 0.4823024570941925, -0.24543604254722595, -0.43334460258483887, 0.7232949137687683, -0.7664883732795715, 0.20009638369083405, 0.09284618496894836, -0.8270392417907715, -1.0918084383010864, -0.3152054250240326, 0.03617538884282112, -0.2806362807750702, 0.23230047523975372, -0.19065849483013153, -0.29119059443473816, 1.0069669485092163, 0.6560617089271545, -0.2424546331167221, 0.36788657307624817, -0.3137481212615967, 0.4160429835319519, -0.22541368007659912, 0.6212813854217529, 0.23623649775981903, 0.08046095818281174, 0.3838840425014496, -0.4536784887313843, -0.6932873725891113, 0.28003373742103577, 0.3507124185562134, -0.5418343544006348, 0.8253418207168579, 0.452131450176239, 0.16283439099788666, -0.5921689867973328, 0.09647876769304276, 0.7058196663856506, -0.4242342710494995, 0.5114271640777588, 0.05427447706460953, 0.2161991000175476, -0.04833610728383064, -0.02194841578602791, 0.03225426748394966, -0.30494508147239685, -0.48973917961120605, 0.12138018012046814, 0.11528061330318451, 0.007397870998829603, -0.14901551604270935, 0.250965416431427, 0.42686668038368225, 0.2282375991344452, 0.06636321544647217, 0.7479418516159058, 0.5211820602416992, -0.1427849531173706, -0.8044449090957642, 0.03147619962692261, -0.3561750650405884, 0.4720671474933624, 0.3915298283100128, -0.513024628162384, -0.14316637814044952, -0.10185549408197403, 0.6449743509292603, 0.10099491477012634, 0.03930757939815521, -0.9293291568756104, -0.0727173462510109, -0.5594273805618286, -0.21346083283424377, -0.2673107087612152, 0.32924795150756836, -0.3184155523777008, -0.1317390352487564, -0.8254562616348267, -0.8842043280601501, -0.4676951766014099, -0.45381981134414673, 0.1696740835905075, -0.8572046756744385, 0.0027927267365157604, -0.22969883680343628, -0.03752486780285835, 0.2911430895328522, -0.7652330994606018, -0.24361717700958252, 0.4655988812446594, 0.01768183335661888, 0.3032882809638977, -0.253249853849411, 0.83502596616745, 0.3071090579032898, -0.4700177311897278, 0.35800331830978394, -0.18353044986724854, 0.0006141316262073815, 0.11755351722240448, -0.48293209075927734, 0.29063794016838074, -0.21052628755569458, 0.13906891644001007, 0.4439190626144409, 0.627037763595581, -0.8924465775489807, -0.06884738057851791, -0.16808991134166718, 0.1935020536184311, -0.4514548182487488, -0.3121908903121948, -0.6732878088951111, -0.3133939206600189, 0.22558104991912842, 0.1472163051366806, -0.5833939909934998, 1.1756010055541992, -0.10541590303182602, -0.11528173089027405, 0.40370655059814453, -0.054755646735429764, -0.9601394534111023, -0.5174320340156555, 0.2938857674598694, 0.3372485637664795, -0.07195672392845154, 0.24480605125427246, -0.45055875182151794, 0.3872532546520233, -0.04790603369474411, 0.6303477883338928, -0.26923954486846924, -0.8485231995582581, 0.43521377444267273, -0.30012261867523193, -0.32376840710639954, 0.45032042264938354, 0.09011316299438477, -0.543418288230896, 0.0851031094789505, 0.6284099817276001, -0.3949025571346283, 0.24237507581710815, -0.04583648592233658, 0.5891487002372742, 0.7069453597068787, 0.38639035820961, 0.21795964241027832], "query": "public class TwitterService : ITwitterService\n\n    {\n\n        private readonly IConfiguration _configuration;\n\n        private readonly ILogger<TwitterService> _logger;\n\n        private readonly IScreenshotService _screenshotService;\n\n        private readonly AsyncRetryPolicy _retryPolicy;\n\n        private readonly ITwitterClientFactory _twitterClientFactory;\n\n\n        public TwitterService(IConfiguration configuration, ILogger<TwitterService> logger, IScreenshotService screenshotService, ITwitterClientFactory twitterClientFactory)\n\n        {\n            _configuration = configuration ?? throw new ArgumentNullException(nameof(configuration));\n            _logger = logger ?? throw new ArgumentNullException(nameof(logger));\n            _screenshotService = screenshotService ?? throw new ArgumentNullException(nameof(screenshotService));\n            _twitterClientFactory = twitterClientFactory ?? throw new ArgumentNullException(nameof(twitterClientFactory));\n            \n            _retryPolicy = Policy\n                .Handle<Exception>()\n                .WaitAndRetryAsync(new[]\n                {\n                    TimeSpan.FromSeconds(5),\n                    TimeSpan.FromSeconds(30)\n                });\n        }\n\n        //\u0440\u0435\u0432\u044c\u044e -- \u043c\u0435\u0442\u043e\u0434 \u043c\u043e\u0436\u043d\u043e \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u0441\u0442\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u043c\n        private string CreateTweetText(string currentEvent)\n\n        {\n            if (!currentEvent.Equals(\"default\", StringComparison.CurrentCultureIgnoreCase))\n            {\n                return $\"Today's Overwatch 2 Arcademodes, (Event: {currentEvent}) - {DateTime.Now:dddd, d MMMM} \\n#overwatch2 #owarcade\";\n            }\n\n            return $\"Today's Overwatch 2 Arcademodes - {DateTime.Now:dddd, d MMMM} \\n#overwatch2 #owarcade\";\n        }\n        \n        public async Task PostTweet(string screenshotUrl, string currentEvent)\n\n        {\n            await _retryPolicy.ExecuteAsync(() => PostTweetAction(screenshotUrl, currentEvent));\n        }\n\n        private async Task PostTweetAction(string screenshotUrl, string currentEvent)\n\n        {\n            try\n            {\n                //\u0440\u0435\u0432\u044c\u044e -- \u043d\u0435\u043b\u044c\u0437\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c var\n                var client = _twitterClientFactory.Create();\n                var screenshot = await _screenshotService.CreateScreenshot(screenshotUrl);\n                var uploadedImage = await client.Upload.UploadTweetImageAsync(screenshot);\n                await client.Tweets.PublishTweetAsync(new PublishTweetParameters\n                {\n                    Text = CreateTweetText(currentEvent),\n                    Medias = { uploadedImage }\n                });\n            }\n            catch (Exception e)\n            {\n                _logger.LogError($\"Couldn't Post tweet - {e.Message}\");\n                throw;\n            }\n        }\n\n        public async Task DeleteLastTweet()\n\n        {\n            await _retryPolicy.ExecuteAsync(DeleteLastTweetAction);\n        }\n        \n        private async Task DeleteLastTweetAction()\n\n        {\n            try\n            {\n                //\u0440\u0435\u0432\u044c\u044e -- \u043d\u0435\u043b\u044c\u0437\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c var\n                var client = _twitterClientFactory.Create();\n                var twitterUsername = _configuration.GetSection(\"TwitterUsername\").Value ?? throw new Exception(\"Twitter username not found\");\n                var tweets = await client.Timelines.GetUserTimelineAsync(twitterUsername);\n                var tweetsToBeDeleted = tweets.FirstOrDefault(tweet => tweet.CreatedAt >= DateTime.Today.ToUniversalTime());\n                //\u0440\u0435\u0432\u044c\u044e -- \u043c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0443\u0441\u043b\u043e\u0432\u043d\u044b\u0439 \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\n                if (tweetsToBeDeleted is null)\n                {\n                    _logger.LogInformation(\"No tweet found to be deleted\");\n                }\n                else\n                {\n                    await client.Tweets.DestroyTweetAsync(tweetsToBeDeleted);\n                }\n            }\n            catch (Exception e)\n            {\n                _logger.LogError(\"I tried to delete a Tweet that couldn't be found. Hard deleting without a tweet sent?\");\n                _logger.LogError(e.Message);\n                throw;\n            }\n        }\n    }\n", "answer": "{\"43\": \" -- \u043c\u0435\u0442\u043e\u0434 \u043c\u043e\u0436\u043d\u043e \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u0441\u0442\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u043c\",\n\"65\": \" -- \u043d\u0435\u043b\u044c\u0437\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c var\",\n\"64\": \" -- \u043d\u0435\u043b\u044c\u0437\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c var\",\n\"96\": \" -- \u043c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0443\u0441\u043b\u043e\u0432\u043d\u044b\u0439 \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\"}"}