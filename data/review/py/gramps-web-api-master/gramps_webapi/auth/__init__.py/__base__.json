{"embedding": [0.14477850496768951, -0.537591278553009, 0.06930233538150787, 0.02959446981549263, 0.3718736469745636, -0.8668051362037659, -0.4116440713405609, -0.4678897261619568, -0.172140434384346, -0.49565765261650085, -0.26846861839294434, -0.4752329885959625, 0.06475517898797989, 0.6351819634437561, 0.16294071078300476, -0.009726263582706451, 0.3181516230106354, 0.36158013343811035, 0.34720009565353394, -0.6678434610366821, 0.19672834873199463, -0.054747603833675385, 0.7450636029243469, 0.7056851983070374, -0.4515615999698639, -0.025498803704977036, 0.07109636068344116, 0.2686366140842438, 0.7017186284065247, 0.07130841165781021, 0.09462083876132965, -0.11848625540733337, 0.5032331943511963, -0.002183196134865284, -0.027614781633019447, -0.5923371911048889, 0.46480193734169006, 1.1001917123794556, -0.3801833391189575, -0.07038992643356323, -0.1661091297864914, 0.5347397327423096, 0.2191372811794281, -0.4636844992637634, -0.0829421877861023, 0.2352878451347351, 0.040722399950027466, 0.4552335739135742, 0.030338136479258537, 0.3778586983680725, -0.1256391406059265, -0.06687775254249573, 0.021621709689497948, 0.1261589676141739, 0.49520641565322876, -0.7246146202087402, -0.5112570524215698, 0.107292540371418, 0.7244767546653748, -0.7282422184944153, 0.3443325161933899, 0.20837156474590302, -0.02179040014743805, -0.07679548859596252, 0.4609372317790985, -0.08854096382856369, -0.8284214735031128, 0.006437507923692465, 0.19750364124774933, 0.10668904334306717, -0.39935803413391113, -0.32411259412765503, 0.04405289143323898, 0.1382589340209961, -0.23431341350078583, -0.27411043643951416, 0.016171783208847046, -0.36733120679855347, 0.12251394987106323, -0.2787289321422577, 0.45893633365631104, -0.4830719530582428, -0.2705916464328766, 0.6623287796974182, 0.9870705604553223, 0.7099848985671997, -0.21968503296375275, -0.27725857496261597, -0.22136490046977997, -0.22635948657989502, -0.13372154533863068, -0.2950916886329651, 0.2222476303577423, 0.7938777208328247, 0.16249336302280426, -0.2970932722091675, -0.20298512279987335, 0.10410505533218384, -0.19315826892852783, -0.3616367280483246, -0.08694180101156235, 0.43198248744010925, 0.4101441204547882, 0.7347477674484253, -0.2662544846534729, -0.6181121468544006, -0.474739670753479, -0.14070898294448853, 0.2502093017101288, -0.3493468165397644, -1.5265848636627197, 0.16736207902431488, 0.28237661719322205, -0.42805376648902893, -0.12601879239082336, -0.20195770263671875, -0.07760516554117203, 0.06584377586841583, -0.08307047933340073, -0.5067428946495056, 0.519328236579895, -0.33208775520324707, 0.5024358034133911, 0.28752872347831726, 1.0425164699554443, 0.9977843761444092, -0.772640585899353, -0.22261269390583038, 0.0883566215634346, -0.4450513422489166, -0.39443689584732056, -0.22829362750053406, -0.008697591722011566, 0.07106572389602661, 0.4010203778743744, -0.8398205637931824, -0.11051511764526367, 0.276998907327652, 0.3765389025211334, 0.5372409820556641, 0.006843935698270798, 0.06645780056715012, -0.3726902902126312, -0.5174863934516907, 0.0710986778140068, -0.4187539517879486, 0.0442805141210556, -0.3189048767089844, -0.31363463401794434, -0.6438897252082825, 0.42779800295829773, -0.3928989768028259, -0.5256847143173218, -0.032737117260694504, -0.6777883768081665, 0.6393438577651978, 0.1013837456703186, -1.05184805393219, 0.4069817066192627, -0.5060732364654541, -0.2644668519496918, -0.7474396228790283, -0.4658370614051819, -0.25124412775039673, -0.10265833884477615, 0.13576963543891907, 0.3637336790561676, -0.5722729563713074, -0.293653666973114, 0.12898962199687958, -0.0768255814909935, -0.25044384598731995, -0.25566959381103516, 0.30618566274642944, -0.24237915873527527, 0.19443391263484955, 0.4298771321773529, -0.4917709231376648, -0.11855348199605942, -0.10728875547647476, -0.5092426538467407, -0.7189462780952454, 0.2603304386138916, -0.17966537177562714, 0.4137152135372162, 0.4553465247154236, 0.16916748881340027, 0.826675295829773, 0.2527522146701813, 0.5869777202606201, -0.7798289060592651, -0.21807575225830078, 0.13727372884750366, 0.3039698898792267, 0.06059294193983078, 0.1919253170490265, -0.02900991588830948, 0.32696613669395447, -0.36049866676330566, -0.9007951617240906, -0.17226679623126984, 0.10263935476541519, 0.11636796593666077, -0.6774031519889832, 0.06295955926179886, 0.16012951731681824, -0.17990048229694366, 0.34471893310546875, 0.10884638875722885, -1.1364988088607788, -0.31470513343811035, -0.029039723798632622, 0.1311708390712738, 0.43822160363197327, 0.16417841613292694, -0.6628481149673462, 0.9947522282600403, -0.4628068804740906, 0.5510092973709106, 0.72095787525177, 0.6707962155342102, -0.09305093437433243, -0.45782148838043213, -0.6091250777244568, -0.02838103473186493, 0.010478000156581402, -0.21263296902179718, -0.09845319390296936, 0.8383450508117676, -0.379092276096344, 0.4476093053817749, -0.2295006811618805, 0.1569315642118454, 0.4242037832736969, -0.17096054553985596, 0.014775389805436134, 0.09345566481351852, 0.2595996558666229, -0.2297254502773285, 0.2780512273311615, -0.0577436164021492, 0.14514489471912384, 0.15904653072357178, 0.251914918422699, -0.020372189581394196, -0.1741941124200821, 0.3345915377140045, -0.017715314403176308, -0.008604639209806919, -0.8301828503608704, -0.5685885548591614, -0.18002216517925262, 0.13059775531291962, 0.230964794754982, -0.8339477777481079, -0.4039553999900818, -0.2609756588935852, 0.5070277452468872, -0.17513644695281982, -0.632497251033783, 0.29189327359199524, -0.8713484406471252, -0.7984887957572937, 0.3598298132419586, 0.23666898906230927, -0.4347233474254608, -0.19020597636699677, 0.17877662181854248, -0.37706178426742554, -0.5567381978034973, 1.1242976188659668, 1.058227777481079, -0.4399896264076233, -0.1453874409198761, -0.3892900347709656, -0.27107539772987366, 0.20446236431598663, 0.22836801409721375, -0.253584623336792, -0.4399149417877197, -0.29886946082115173, -0.4633690118789673, 0.06296442449092865, 0.5769991874694824, 0.34777939319610596, 0.1428811103105545, -0.308083713054657, -0.055034052580595016, -0.04917685687541962, 0.35445553064346313, 0.003027890808880329, -0.27201807498931885, -0.33429718017578125, -0.32317081093788147, 0.7979776263237, 0.21800410747528076, -0.7341782450675964, -0.1327461302280426, 0.1530594527721405, -0.7409453988075256, 0.23918244242668152, 0.3133331537246704, 0.8906598091125488, -0.516364336013794, 0.5724722743034363, -0.2474927455186844, 0.67611163854599, -0.3502333164215088, 0.3513822853565216, 0.028168221935629845, -0.002114392351359129, -0.527199923992157, 0.2778530418872833, 0.837041974067688, 0.5775341391563416, -0.9333398938179016, -0.05928782746195793, -0.2259453535079956, 0.4476044476032257, 0.6843502521514893, -0.014299668371677399, 0.4943086504936218, 0.741682767868042, -0.4863522946834564, 0.8071998357772827, -0.4788535535335541, 0.19608628749847412, 0.39992210268974304, -0.074199378490448, 0.6135517358779907, -1.4891153573989868, -0.030317548662424088, 0.46645623445510864, 0.4131852984428406, -0.43421608209609985, 0.12947595119476318, -0.13849838078022003, -0.16561929881572723, -0.09237834066152573, -0.6537673473358154, 0.01666247844696045, -0.43619996309280396, 0.5432735085487366, 0.38502421975135803, 0.8407471776008606, -0.6473255753517151, 0.6168304085731506, 0.3249616026878357, -0.17691285908222198, 0.30548858642578125, 0.5161980390548706, -0.16754862666130066, 0.09596122801303864, 0.042740099132061005, 0.28999826312065125, -0.976746141910553, -0.1759888082742691, -0.010976317338645458, 0.2169831395149231, -0.07293853163719177, 0.5671893954277039, -0.36286553740501404, 0.29091858863830566, 0.11218472570180893, -0.03849959373474121, 0.47471359372138977, -0.32482245564460754, -0.24794724583625793, 0.7253881096839905, -0.29749512672424316, 0.3667421042919159, -0.4619360864162445, -0.478365033864975, -0.10532855987548828, 0.22698605060577393, 0.3049680292606354, -0.1572912484407425, -0.006814675871282816, -1.3860905170440674, 0.328431636095047, 0.5470433235168457, 0.5054425597190857, 0.4198245108127594, 0.7739701271057129, 0.24057070910930634, -0.7058512568473816, 0.16276699304580688, -0.15092507004737854, -0.16093768179416656, -0.10698509216308594, -0.4548420310020447, -0.049422137439250946, 0.26090875267982483, 0.051281701773405075, -0.19100773334503174, 0.44906705617904663, 0.3331396281719208, 0.307677298784256, -0.2149830311536789, -0.1980476677417755, 0.11778315901756287, -0.4794897437095642, 1.0169118642807007, 0.106015145778656, 0.026583725586533546, 0.09780510514974594, 0.3352509140968323, 0.3389802575111389, -0.8003692626953125, 0.8027350902557373, -0.2156389355659485, 0.01631619781255722, -0.3993419408798218, 0.22846324741840363, 0.612211287021637, -0.608488917350769, 0.34451824426651, 0.8402627110481262, 0.6505300402641296, 0.7102126479148865, 0.28764453530311584, -0.46411123871803284, -0.03307963162660599, 0.6550355553627014, -0.47576019167900085, 0.6309814453125, 0.06348896771669388, 0.17538869380950928, -0.9066417217254639, 0.44240403175354004, 0.3597690165042877, -0.20339636504650116, 0.1287802904844284, -0.3033832013607025, 0.309326171875, -0.597480058670044, -0.1588846892118454, -0.022660303860902786, -0.1502884179353714, -0.030933592468500137, 0.9210348725318909, 0.3433975875377655, 0.2455487996339798, -0.2667214274406433, 0.757414698600769, -0.31714701652526855, -0.726008415222168, 0.914897084236145, 1.4149081707000732, 0.08781429380178452, -0.514068603515625, 0.14152111113071442, 0.14848048985004425, 0.39661547541618347, -0.7467041611671448, 0.4108261466026306, -0.4359194040298462, 0.049942970275878906, 0.17979761958122253, 0.20528143644332886, 0.3686707019805908, -0.5934454202651978, -0.3312426507472992, 0.830278217792511, 0.47697606682777405, 0.3016146421432495, 0.4914286136627197, 0.010575326159596443, -0.08664075285196304, 0.31308624148368835, 0.1122862696647644, -0.7969341278076172, -0.26801514625549316, -0.005426536314189434, 0.24970263242721558, -0.10790737718343735, 0.4565976560115814, -0.09984352439641953, -0.31908804178237915, -0.32537081837654114, 0.39903634786605835, 0.026664024218916893, 0.1955367922782898, 0.03082188032567501, -0.36324048042297363, -0.9710355401039124, 0.3822636902332306, -0.04220781847834587, 0.11081496626138687, -0.4926334023475647, -0.21882815659046173, -0.4708159863948822, 0.19558000564575195, 0.3378564119338989, -0.5594720840454102, -0.15423505008220673, -0.14375822246074677, -0.204123854637146, 0.028158029541373253, -0.2910515367984772, -0.04024679213762283, 0.535865068435669, -0.15944793820381165, -0.16208119690418243, 0.6306673884391785, -0.1654774695634842, -0.16171668469905853, -0.3769111633300781, -0.012817363254725933, -0.09624038636684418, -0.051805704832077026, -0.23329070210456848, 0.1589169204235077, -0.33159518241882324, -0.25728070735931396, 0.4474814832210541, 0.32929980754852295, 0.32794469594955444, 0.1596696674823761, 0.09913355857133865, -0.026896890252828598, -0.0785137340426445, 0.05610445514321327, 0.3514208495616913, 0.37464192509651184, 0.08900922536849976, 0.17878620326519012, -0.17273589968681335, 0.49581873416900635, 0.26887696981430054, 0.11070674657821655, 0.2804776430130005, -0.24703563749790192, -0.15096285939216614, -0.1803174614906311, -0.21840183436870575, -0.5791139602661133, -0.5012276768684387, 0.2848212420940399, 0.2520010769367218, 0.3367178440093994, 0.2787494957447052, -0.56595778465271, -0.3161890208721161, -0.7454697489738464, -0.5607407689094543, -0.5357165932655334, 0.06779555976390839, 0.06523992121219635, -0.7584795951843262, 0.09355852752923965, 0.43668150901794434, 0.16853462159633636, 0.18538038432598114, 0.16948284208774567, -0.19450409710407257, 0.023420503363013268, 0.2621389627456665, -0.40534597635269165, 0.3283833861351013, -0.0819278135895729, -0.17791850864887238, -0.48347142338752747, -0.21804939210414886, 0.2811928987503052, -0.26215729117393494, -0.14847640693187714, 0.268035888671875, 0.155452162027359, -0.1423027664422989, -1.0066648721694946, 0.09778787940740585, 0.2541024386882782, 0.30894914269447327, -0.661038339138031, -0.7109898328781128, -0.42123258113861084, 0.08327493816614151, 0.043734319508075714, -0.49708712100982666, 0.6893010139465332, -0.18124689161777496, -0.20476071536540985, -0.2763381898403168, 0.21448561549186707, 0.23942647874355316, 0.2615467607975006, 0.9830436706542969, 0.10139887779951096, 0.01691323146224022, -0.652326762676239, 0.16285103559494019, -0.0912412777543068, -0.3963347375392914, 0.2018270045518875, 0.5742614269256592, -0.670234739780426, -0.04328308627009392, -0.10485464334487915, 0.1633967012166977, -0.7397828698158264, 0.3073767125606537, 0.12138012796640396, -0.8406985998153687, -0.22228474915027618, -0.16117680072784424, 0.36069434881210327, -0.11326006799936295, -0.19390814006328583, -0.1358286291360855, -0.03875187411904335, 0.28885436058044434, 0.10610266029834747, 0.5442436933517456, 0.13263431191444397, -0.12290877103805542, -0.18188190460205078, 0.3220115900039673, 0.5606846809387207, -0.6857928037643433, -1.1424405574798584, 0.5835821628570557, -0.3214995861053467, 0.32594364881515503, -0.39157459139823914, -0.017504073679447174, -0.03679254651069641, -0.05114230141043663, -0.2582848072052002, -0.13888126611709595, -0.37696748971939087, -0.499481737613678, -0.19969333708286285, 0.21822091937065125, 0.20308811962604523, -0.4086213707923889, 0.3694809675216675, -0.8752864003181458, 0.11198513954877853, -0.080673947930336, -0.048775941133499146, 0.19061201810836792, 0.06266874819993973, 0.15590164065361023, 0.4388643801212311, 1.093291163444519, -0.2211264669895172, -0.4820972979068756, 0.7966067790985107, -0.2766634225845337, -0.5358192324638367, 0.6482300758361816, -0.15207231044769287, 0.05926160514354706, -0.757380485534668, 0.29819291830062866, -1.0660054683685303, -0.25874465703964233, -0.24629956483840942, 0.14052075147628784, 0.2535260021686554, -0.3775567412376404, 0.8585028052330017, 0.06149910017848015, -0.5570228695869446, 0.42256808280944824, 0.11908737570047379, 0.20159085094928741, 0.9958359599113464, 0.6059824228286743, 0.531588077545166, -0.27744022011756897, 0.759589672088623, 0.19240309298038483, 0.11314406991004944, 0.15148060023784637, 0.2690255343914032, -0.07262909412384033, -0.23785457015037537, 0.20837357640266418, -0.25224414467811584, 0.4712534546852112, 0.053640834987163544, -0.1591002643108368, 0.11755550652742386, 0.3169359266757965, 0.2243153303861618, 0.1848747581243515, 0.32819420099258423, -0.28731676936149597, -0.3844893276691437, -0.3842800557613373, -0.3926441967487335, 0.27907806634902954, -0.6353105902671814, -0.5055846571922302, -0.3046085834503174, -0.030944379046559334, 0.17894978821277618, 0.6076238751411438, 0.04490737244486809, -0.1461896449327469, -0.16089698672294617, 0.5302239656448364, 0.0014562691794708371, -0.27063432335853577, -0.021765219047665596, -0.6837214827537537, 0.27054038643836975, -0.18954229354858398, -0.13305902481079102, 0.609711766242981, 1.0883759260177612, -0.8220885396003723, -0.043778419494628906, 0.20002776384353638, 0.09826534241437912, 0.3973584771156311, -0.6392128467559814, -0.14131619036197662, -0.2624989151954651, -0.22526009380817413, 0.802530825138092, -0.5249919891357422, 0.34943437576293945, -0.5636970400810242, -0.25968873500823975, -0.5917383432388306, 0.525391697883606, 0.4082491397857666, 0.13801094889640808, -0.12385387718677521, -0.2545245289802551, 0.8582223057746887, 0.20965997874736786, -0.6950893998146057, 0.2619466781616211, -0.12288299947977066, -0.6561683416366577, 0.40260201692581177, -0.17417754232883453, -0.0851626992225647, -0.7586159110069275, -0.10063861310482025, -0.23352858424186707, -0.021842852234840393, 0.14882560074329376, -0.15980547666549683, 0.3074071407318115, 0.11675232648849487, 0.6820422410964966, 0.11668983846902847, -0.04795554652810097, 0.007261077407747507, -0.4197555184364319, 0.26097792387008667, 0.35974738001823425, 0.2733563780784607, -0.018391970545053482, 0.06689053028821945, 0.027594327926635742, 0.49902769923210144, -0.6153184771537781, 0.002265767427161336, 0.8443863987922668, -0.09971629828214645, -0.25305598974227905, 0.5754737257957458], "query": "#\n\n# Gramps Web API - A RESTful API for the Gramps genealogy program\n\n#\n\n# Copyright (C) 2020-2022      David Straub\n\n#\n\n# This program is free software; you can redistribute it and/or modify\n\n# it under the terms of the GNU Affero General Public License as published by\n\n# the Free Software Foundation; either version 3 of the License, or\n\n# (at your option) any later version.\n\n#\n\n# This program is distributed in the hope that it will be useful,\n\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n\n# GNU Affero General Public License for more details.\n\n#\n\n# You should have received a copy of the GNU Affero General Public License\n\n# along with this program. If not, see <https://www.gnu.org/licenses/>.\n\n#\n\n\n\"\"\"Define methods of providing authentication for users.\"\"\"\n\n\nfrom __future__ import annotations\n\n\nimport secrets\n\nimport uuid\n\nfrom typing import Any, Dict, List, Optional, Sequence, Set, Union\n\n\nimport sqlalchemy as sa\n\nfrom flask_sqlalchemy import SQLAlchemy\n\nfrom sqlalchemy.exc import IntegrityError, StatementError\n\nfrom sqlalchemy.sql.functions import coalesce\n\n\nfrom ..const import DB_CONFIG_ALLOWED_KEYS\n\nfrom .const import PERMISSIONS, PERM_USE_CHAT, ROLE_ADMIN, ROLE_OWNER\n\nfrom .passwords import hash_password, verify_password\n\nfrom .sql_guid import GUID\n\n\nuser_db = SQLAlchemy()\n\n\ndef add_user(\n\n    name: str,\n\n    password: str,\n\n    fullname: Optional[str] = None,\n\n    email: Optional[str] = None,\n\n    role: Optional[int] = None,\n\n    tree: Optional[str] = None,\n\n):\n\n    <BODY add_user>\n\n\ndef add_users(\n\n    data: List[Dict[str, Union[str, int]]],\n\n    allow_id: bool = False,\n\n    require_password: bool = False,\n\n    allow_admin: bool = False,\n\n):\n\n    <BODY add_users>\n\n\ndef get_guid(name: str) -> str:\n\n    <BODY get_guid>\n\n\ndef get_name(guid: str) -> str:\n\n    <BODY get_name>\n\n\ndef get_tree(guid: str) -> Optional[str]:\n\n    <BODY get_tree>\n\n\ndef delete_user(name: str) -> None:\n\n    <BODY delete_user>\n\n\ndef modify_user(\n\n    name: str,\n\n    name_new: Optional[str] = None,\n\n    password: Optional[str] = None,\n\n    fullname: Optional[str] = None,\n\n    email: Optional[str] = None,\n\n    role: Optional[int] = None,\n\n    tree: Optional[str] = None,\n\n) -> None:\n\n    <BODY modify_user>\n\n\ndef authorized(username: str, password: str) -> bool:\n\n    <BODY authorized>\n\n\ndef get_pwhash(username: str) -> str:\n\n    <BODY get_pwhash>\n\n\ndef _get_user_detail(user, include_guid: bool = False):\n\n    <BODY _get_user_detail>\n\n\ndef get_user_details(username: str) -> Optional[Dict[str, Any]]:\n\n    <BODY get_user_details>\n\n\ndef get_all_user_details(\n\n    tree: Optional[str], include_treeless=False, include_guid: bool = False\n\n) -> List[Dict[str, Any]]:\n\n    <BODY get_all_user_details>\n\n\ndef get_permissions(username: str, tree: str) -> Set[str]:\n\n    <BODY get_permissions>\n\n\ndef get_owner_emails(tree: str, include_admins: bool = False) -> List[str]:\n\n    <BODY get_owner_emails>\n\n\ndef get_number_users(\n\n    tree: Optional[str] = None, roles: Optional[Sequence[int]] = None\n\n) -> int:\n\n    <BODY get_number_users>\n\n\ndef fill_tree(tree: str) -> None:\n\n    <BODY fill_tree>\n\n\ndef config_get(key: str) -> Optional[str]:\n\n    <BODY config_get>\n\n\ndef config_get_all() -> Dict[str, str]:\n\n    <BODY config_get_all>\n\n\ndef config_set(key: str, value: str) -> None:\n\n    <BODY config_set>\n\n\ndef config_delete(key: str) -> None:\n\n    <BODY config_delete>\n\n\ndef get_tree_usage(tree: str) -> Optional[dict[str, int]]:\n\n    <BODY get_tree_usage>\n\n\ndef get_tree_permissions(tree: str) -> Optional[dict[str, int]]:\n\n    <BODY get_tree_permissions>\n\n\ndef set_tree_usage(\n\n    tree: str,\n\n    usage_media: Optional[int] = None,\n\n    usage_people: Optional[int] = None,\n\n    usage_ai: Optional[int] = None,\n\n) -> None:\n\n    <BODY set_tree_usage>\n\n\ndef set_tree_details(\n\n    tree: str,\n\n    quota_media: Optional[int] = None,\n\n    quota_people: Optional[int] = None,\n\n    min_role_ai: Optional[int] = None,\n\n) -> None:\n\n    <BODY set_tree_details>\n\n\ndef disable_enable_tree(tree: str, disabled: bool) -> None:\n\n    <BODY disable_enable_tree>\n\n\ndef is_tree_disabled(tree: str) -> bool:\n\n    <BODY is_tree_disabled>\n\n\nclass User(user_db.Model):\n\n    <BODY User>\n\n\nclass Config(user_db.Model):\n\n    <BODY Config>\n\n\nclass Tree(user_db.Model):\n\n    <BODY Tree>", "answer": "{}"}