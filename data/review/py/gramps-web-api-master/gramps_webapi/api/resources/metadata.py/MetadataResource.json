{"embedding": [0.2841090261936188, -0.8788106441497803, -1.0782796144485474, -0.1578192263841629, 0.9781209826469421, -0.2076636552810669, 0.06465129554271698, -0.22266152501106262, 0.12379384785890579, -0.72461998462677, -0.19734619557857513, -0.18836580216884613, -0.24362978339195251, -0.0025029885582625866, 0.27553388476371765, 0.18311303853988647, -0.2178150713443756, 0.35012999176979065, 0.8736763596534729, -0.5483804941177368, -0.10098638385534286, 0.20765113830566406, 0.43678849935531616, 0.08744487166404724, 0.19452081620693207, -0.21418605744838715, 0.4855014979839325, -0.5003692507743835, 0.8420226573944092, 0.4161706268787384, -0.2731455862522125, -0.3315865695476532, 0.6979281902313232, 0.46417275071144104, -0.2850167751312256, -0.4534668028354645, 0.1892714649438858, -0.15477697551250458, -0.9793282747268677, -0.11548099666833878, -0.3631989359855652, 0.05266780033707619, 0.2350025177001953, -0.5784075856208801, 0.2828167676925659, 0.15099631249904633, -0.15837712585926056, 0.0056372229009866714, 0.17050936818122864, 0.10062969475984573, 0.11258596926927567, -0.19765615463256836, -0.5258603096008301, 0.8158351182937622, -0.08475315570831299, -0.1617560088634491, -0.8138712644577026, 0.9688122272491455, -0.09303440898656845, -0.15748871862888336, 0.5080117583274841, 0.41790956258773804, -0.0792156308889389, 0.4847932457923889, 0.21570269763469696, 0.00325845368206501, -0.1610211730003357, -0.09440655261278152, -0.11523152887821198, 0.05904192104935646, -0.19201013445854187, -0.3992624878883362, 0.3371777832508087, 0.36664026975631714, 0.11403895169496536, -0.35275644063949585, -0.09521634876728058, -0.5469281077384949, 0.14756301045417786, -0.09529200196266174, 0.5958799123764038, -0.380376935005188, 0.0012701149098575115, -0.6091064810752869, 0.6328956484794617, 0.19899380207061768, 0.38543078303337097, 0.011879958212375641, -0.5862829089164734, -0.47221583127975464, -0.42955103516578674, 0.4044513702392578, 0.0672859326004982, 1.1112712621688843, 0.1646960973739624, -0.27043095231056213, -0.5857751369476318, -0.13313987851142883, -0.1598178744316101, -0.008293112739920616, -0.26455289125442505, 0.34012389183044434, 0.34283334016799927, 0.06227060779929161, 0.383817583322525, -0.4973420798778534, -0.305711954832077, -0.18313001096248627, 0.5989879965782166, -0.057080455124378204, -0.9843127727508545, -0.16309966146945953, 0.24847061932086945, -0.3176555335521698, -0.16529017686843872, -0.14224182069301605, -0.06563655287027359, 0.21529684960842133, 0.29107341170310974, -0.42497941851615906, 0.019266188144683838, -0.20903420448303223, 0.31186941266059875, -0.31817626953125, 0.49676498770713806, 0.5572108030319214, -0.08088012039661407, 0.006350902374833822, 0.05368450656533241, -0.20600630342960358, -0.11737510561943054, 0.2089344710111618, -0.2649720311164856, -0.3666486442089081, 0.4789612889289856, -0.3288469612598419, 0.2023206502199173, 0.005727122072130442, -0.14629529416561127, 0.8140915036201477, -0.29085078835487366, -0.0034631220623850822, -0.20983663201332092, -0.5757742524147034, 0.05143347382545471, -0.27397143840789795, 0.11380511522293091, -0.14934976398944855, -0.353330135345459, -0.5142691731452942, 0.8021547198295593, -0.5742923617362976, -0.279462993144989, 0.20080602169036865, -0.7232767343521118, 0.6511900424957275, -0.3612440824508667, -0.8704829216003418, -0.19197846949100494, -0.14440229535102844, 0.14153142273426056, -0.7142723798751831, -0.3034482002258301, -0.2345813512802124, -0.28697669506073, -0.12762296199798584, -0.12967535853385925, -0.6323285102844238, -0.34842321276664734, 0.33817192912101746, -0.45062294602394104, 0.11094963550567627, -1.222481608390808, -0.04945164546370506, -0.0539909265935421, 1.0668035745620728, 0.4668627679347992, -0.04776686429977417, -0.032559242099523544, -0.003640716662630439, -0.3731731176376343, -1.0832786560058594, -0.25471991300582886, -0.0857326090335846, -0.16713431477546692, -0.0600675530731678, -0.10331514477729797, 0.5084134936332703, 0.883126974105835, 1.0569928884506226, 0.008759025484323502, -0.19840019941329956, 0.05194772779941559, -0.2906379699707031, -0.14546023309230804, -0.10844766348600388, -0.10901997238397598, -0.3032042682170868, -0.11714185774326324, -0.015027901157736778, -0.7342355251312256, 0.010447267442941666, -0.1309719979763031, 0.00020548299653455615, -0.023806588724255562, -0.1340445876121521, -0.03537297248840332, 0.21358859539031982, -0.6301709413528442, -0.18229924142360687, -0.6684460639953613, 0.23119314014911652, -0.3761606216430664, 0.25132063031196594, 0.6175183057785034, -0.6011509895324707, 0.30287885665893555, 0.203485906124115, 0.014283532276749611, -0.1835043579339981, 0.3263755440711975, -0.44886815547943115, -0.1410527229309082, -0.4774586856365204, -0.8269351124763489, -0.28204238414764404, 0.42063215374946594, 0.04350477084517479, 0.3465490937232971, -0.3241806626319885, -0.11798004806041718, 0.10230768471956253, 0.5530481338500977, 0.3850066661834717, 0.26335540413856506, -0.5791601538658142, 0.22779998183250427, 0.9441744685173035, 0.14667116105556488, -0.06878668069839478, 0.2011909782886505, 0.1432734876871109, -0.3471389710903168, -0.5679306387901306, -0.6315742135047913, -0.7144966721534729, 0.48595306277275085, -0.21157397329807281, 0.12772996723651886, -0.47218096256256104, 0.22654183208942413, -0.7440932393074036, 0.07662011682987213, -0.023192234337329865, -0.4572141468524933, -1.12885320186615, -0.4101361632347107, 0.09066609293222427, 0.1442863494157791, -0.7516346573829651, -0.4179244041442871, -0.05037808045744896, -0.8612177968025208, 1.040779709815979, -0.3478790521621704, -0.18818342685699463, -0.03501994535326958, -0.1569896787405014, -0.31296104192733765, -0.18510186672210693, 0.17308196425437927, 0.894075870513916, -0.5603679418563843, -0.2740752696990967, -0.6750460267066956, -0.26789167523384094, -0.14178666472434998, -0.03919963166117668, -0.5784783959388733, 0.04867957532405853, -0.07767218351364136, -0.2459213137626648, 0.5361401438713074, -0.007272372953593731, 0.7331888675689697, -0.5939453840255737, -0.2164195328950882, 0.6055889129638672, -0.6130435466766357, 0.1824856400489807, -0.20787832140922546, 0.2659982740879059, -0.11660805344581604, -0.340016633272171, -0.3323950171470642, 0.2948451340198517, -0.6004095077514648, 0.2959746718406677, 0.4886624813079834, -0.36670753359794617, 0.1995524913072586, 0.4009209871292114, 1.3340749740600586, -0.029585376381874084, -0.33198216557502747, -0.013579091057181358, 0.5400257110595703, -0.5704901814460754, -0.040706031024456024, 0.08210127800703049, -0.469907283782959, -0.13304051756858826, 0.695701539516449, 0.7543568015098572, -0.299166202545166, 0.17763425409793854, -0.23843896389007568, 0.8286176323890686, 0.24793773889541626, 0.5776370167732239, -0.5442186594009399, 0.669211745262146, 0.655212938785553, -0.40195125341415405, 1.2028108835220337, -0.7697422504425049, 0.2911265194416046, 0.12848688662052155, 0.4077607989311218, -0.08843770623207092, -0.1879560351371765, -0.35225391387939453, 0.0692441388964653, 0.19403326511383057, -0.08207029849290848, -0.06050563231110573, -0.07518257945775986, -0.995028018951416, 0.12817339599132538, -0.09638942033052444, 0.7211993932723999, -0.46931642293930054, 0.009793326258659363, 0.0823262557387352, -0.05123903974890709, -0.5141610503196716, 0.5806556940078735, -0.5094391703605652, 0.030376644805073738, -0.8043720126152039, -0.1387268304824829, -0.09772468358278275, 0.28331613540649414, 1.0061562061309814, 0.7166184782981873, -1.129334568977356, -0.4589039385318756, -0.34824439883232117, -0.263046532869339, 0.1753874570131302, -0.4051244854927063, 0.20637717843055725, -0.37502390146255493, 0.6609253287315369, -0.4466860592365265, -0.3245120048522949, 0.029024967923760414, -0.1740635484457016, 0.6166842579841614, -0.6028578281402588, -0.11623739451169968, -0.5173737406730652, -0.11916600912809372, -0.060973793268203735, 0.2501683831214905, -0.19496098160743713, -0.31273403763771057, -0.1911931335926056, -1.2009915113449097, 0.2409621775150299, -0.08195966482162476, 0.885772168636322, -0.1618611365556717, -0.0400211364030838, 0.21371886134147644, -0.6020021438598633, 0.07438723742961884, 0.12050283700227737, -0.060506485402584076, -0.26539531350135803, 0.04517792910337448, -0.05950763076543808, 0.04949597269296646, 0.5306967496871948, -0.35406556725502014, -0.07397978752851486, -0.25479331612586975, 0.08903622627258301, 0.3379180431365967, -0.3372352421283722, 0.11623110622167587, -0.6880714297294617, 0.8072652220726013, 0.4162820279598236, -0.30406302213668823, -0.4792642891407013, 1.3505507707595825, 0.15217669308185577, -0.15537820756435394, 1.0088920593261719, -0.4771788716316223, -0.6815705895423889, -0.4731125235557556, 0.1254916936159134, -0.49975818395614624, -0.25988906621932983, 0.5988174080848694, 1.0336402654647827, 0.2058977484703064, 1.0649094581604004, 0.11690955609083176, 0.058235593140125275, 1.0650725364685059, 0.27515068650245667, -0.2674373686313629, 0.19772323966026306, -0.3589235544204712, 0.10064926743507385, -0.7535322308540344, 0.0932353138923645, 0.17528708279132843, -0.11110050976276398, 0.11641432344913483, -0.8807902932167053, 0.09908505529165268, -0.21146276593208313, -0.10849110037088394, -0.2876514196395874, 0.08577250689268112, 0.08692076802253723, 0.5412105321884155, 0.04090379551053047, 0.5628076791763306, -0.30669689178466797, 0.25515908002853394, -0.18792274594306946, -0.7216524481773376, 0.48312029242515564, 0.7108438611030579, -0.4257708489894867, -0.49496909976005554, 0.12931451201438904, -0.07303224503993988, -0.21307604014873505, -0.4743099808692932, -0.6105789542198181, 0.5992467403411865, -0.1649438589811325, -0.30429333448410034, 0.05515066906809807, -0.4150694012641907, -0.3441928029060364, 0.22367434203624725, 0.3753298223018646, 0.6090816259384155, -0.4715125858783722, 0.051226940006017685, 0.14803922176361084, -0.7758976817131042, -0.1764824092388153, -0.40162909030914307, 0.743575394153595, 0.28192898631095886, -0.3216303586959839, 0.10862599313259125, -0.12445686012506485, 0.08135931938886642, -0.35072484612464905, -0.09778270870447159, -0.14044153690338135, 0.6797575354576111, -0.2579152584075928, 0.5503351092338562, 0.19052131474018097, -0.28062689304351807, -0.8960570693016052, 0.6712346076965332, -0.4758133888244629, 0.14989201724529266, -0.5650181770324707, -0.20637059211730957, 0.4253932535648346, 0.30031144618988037, 0.23849014937877655, -0.12483830749988556, 0.2777085304260254, 0.12773928046226501, 0.2639774978160858, 0.46817249059677124, -0.024055803194642067, 0.18202640116214752, -0.82912278175354, -0.30566245317459106, 0.049778521060943604, 0.22069020569324493, -0.2335404008626938, -0.02747751958668232, 0.06695204228162766, 0.41568607091903687, 0.09896165877580643, -0.748477578163147, -0.22353726625442505, 0.6906253695487976, -0.25612199306488037, -0.3985317051410675, 0.36881011724472046, -0.30778372287750244, 0.4928467869758606, -0.0679841935634613, 0.3685433864593506, 0.056664880365133286, -0.23446024954319, 0.1443568915128708, -0.38166171312332153, 0.1705513894557953, -0.2360948771238327, 0.242088183760643, -0.19074614346027374, 0.04882105067372322, 0.8244761228561401, -0.1926426887512207, -0.3149881362915039, 0.12471091002225876, -0.30724337697029114, 0.20500585436820984, 0.27333781123161316, -0.30327391624450684, -0.23631654679775238, 0.6169470548629761, -0.490886926651001, 0.5310572385787964, -0.08413299173116684, -0.26417335867881775, -0.42739295959472656, -0.05714152753353119, -0.5806483030319214, 0.07056319713592529, 0.2471572905778885, 0.39650043845176697, -0.5769517421722412, -0.24015817046165466, 0.1464506834745407, 0.5332571864128113, -0.30970439314842224, -0.2664380669593811, 0.393968403339386, 0.22212891280651093, -0.22255060076713562, 0.45186567306518555, 0.15632031857967377, 0.30590465664863586, -0.09269839525222778, -0.42326387763023376, 0.15744657814502716, 0.3479492664337158, 0.4078609347343445, 0.058451492339372635, 0.6272928714752197, -0.39852622151374817, 0.2520209550857544, -0.0020975256338715553, -0.21217624843120575, 0.40008312463760376, 0.32635942101478577, -0.2904178500175476, -0.008251959457993507, -0.15529382228851318, 0.24549905955791473, 0.5444540977478027, -0.6834137439727783, 0.6734184622764587, -0.1574537605047226, 0.16989988088607788, -0.0617038868367672, -0.07041455805301666, 0.5079337358474731, 0.4671238958835602, 1.2929798364639282, 0.9342039823532104, 0.33701327443122864, -0.6130774617195129, 0.2813354432582855, 0.5624128580093384, -0.2077742964029312, 0.7519639134407043, 0.8914468884468079, -0.3442237973213196, -0.3562236428260803, 0.29733577370643616, -0.4433552920818329, -0.711824893951416, 0.6428312063217163, -0.1807667315006256, -0.866123616695404, 0.24647700786590576, -0.019989103078842163, -0.04457397758960724, -0.14840543270111084, -0.4437350630760193, 0.27736181020736694, -0.31469181180000305, -0.4381940960884094, -0.10342605412006378, 0.05810849741101265, 0.27362358570098877, -0.17063093185424805, -0.3491692841053009, 0.2976309061050415, 0.7882444858551025, -1.1009091138839722, 0.07268401980400085, 0.6473219394683838, 0.3180605173110962, -0.10368531942367554, -0.8071842789649963, 0.5684857964515686, 0.12090754508972168, -0.46212804317474365, -0.7760975956916809, -0.4540712535381317, -0.11841963231563568, -0.4357101321220398, 0.2916390001773834, 0.3023451268672943, 0.5790393352508545, 0.2134692668914795, 0.5367106795310974, -0.24321429431438446, -0.17883960902690887, 0.24928128719329834, 0.5980637073516846, 0.1991516500711441, -0.2341558039188385, 0.3685288727283478, -0.5356758832931519, 0.6376180052757263, -0.03606419637799263, -0.5005511045455933, 0.6079702973365784, 0.3265784680843353, -0.30248409509658813, 0.7736133933067322, 0.18769465386867523, -0.16563670337200165, -0.026462847366929054, 0.5052233934402466, -0.505337119102478, -0.30277708172798157, -0.37990015745162964, 0.21834449470043182, 0.3673657774925232, -0.03355071321129799, 0.45256200432777405, -0.5558671355247498, -0.2552259564399719, -0.357027530670166, 0.26793816685676575, -0.2971875071525574, 0.7486127018928528, 0.8372547030448914, 0.5215416550636292, 0.1322600245475769, 0.7328536510467529, -0.052102990448474884, 0.22832858562469482, 0.05702472850680351, 0.413741797208786, 0.4373018741607666, 0.4338623881340027, 0.21733376383781433, -0.07019948959350586, 0.2489418089389801, -0.03441262245178223, 1.1526678800582886, -0.5499541759490967, -0.21735981106758118, 0.10003536939620972, -0.14040279388427734, 0.16377969086170197, -0.3298293650150299, -0.29683569073677063, -0.27083536982536316, 0.021429430693387985, 0.18634721636772156, -0.49245673418045044, -0.5214181542396545, -0.1592383086681366, -0.7219123244285583, 0.14952880144119263, 0.24919992685317993, 0.563503086566925, -0.3646967113018036, 0.2349018007516861, -0.14692902565002441, 0.03611911088228226, 0.4890463054180145, 0.09686291217803955, -0.7105939388275146, 0.026955805718898773, -0.062254033982753754, 0.3310781419277191, 0.8154757022857666, 1.0129486322402954, -0.037295904010534286, 0.3007475435733795, -0.047760069370269775, -0.23812611401081085, 0.7195329070091248, 0.09691144526004791, -0.37349018454551697, -0.15925340354442596, 0.04007592052221298, 0.6209176778793335, -0.10280415415763855, 0.6964807510375977, -0.009975910186767578, 0.05111018195748329, -0.20630209147930145, 0.6842281818389893, 0.4088905155658722, 0.02258131094276905, -0.3608212471008301, -0.6427074670791626, -0.04035218432545662, 0.7354418635368347, -0.6612536311149597, 0.9360663890838623, -0.1965099573135376, 0.06453826278448105, 0.05799635872244835, -0.18485800921916962, 0.3828902542591095, -0.7835638523101807, 0.019680315628647804, 0.003099789610132575, 0.34713247418403625, 0.7837751507759094, -0.20448985695838928, -0.34221503138542175, 0.09053844213485718, 1.2164430618286133, 0.17433492839336395, -0.4341145157814026, 0.3635765612125397, -0.3784727454185486, 0.12949447333812714, 0.5358481407165527, 0.5082947611808777, 0.24662506580352783, 0.05283448100090027, 0.4444807767868042, -0.3244405686855316, -0.47877371311187744, 0.27479949593544006, 0.5253239274024963, 0.11003202944993973, 0.2465287744998932, 0.2708207368850708], "query": "class MetadataResource(ProtectedResource, GrampsJSONEncoder):\n\n    \"\"\"Metadata resource.\"\"\"\n\n    @property\n    def db_handle(self) -> DbReadBase:\n        \"\"\"Get the database instance.\"\"\"\n        return get_db_handle()\n\n    @use_args(\n        {\n            \"surnames\": fields.Boolean(load_default=False),\n        },\n        location=\"query\",\n    )\n    def get(self, args) -> Response:\n        \"\"\"Get active database and application related metadata information.\"\"\"\n        catalog = GRAMPS_LOCALE.get_language_dict()\n        for entry in catalog:\n            if catalog[entry] == GRAMPS_LOCALE.language[0]:\n                language_name = entry\n                break\n\n        db_handle = self.db_handle\n        db_name = db_handle.get_dbname()\n        db_type = \"Unknown\"\n        dbstate = DbState()\n        db_summary = CLIDbManager(dbstate).family_tree_summary(database_names=[db_name])\n        if len(db_summary) == 1:\n            db_key = GRAMPS_LOCALE.translation.sgettext(\"Database\")\n            for key in db_summary[0]:\n                if key == db_key:\n                    db_type = db_summary[0][key]\n\n        is_multi_tree = current_app.config[\"TREE\"] == TREE_MULTI\n        has_task_queue = bool(current_app.config[\"CELERY_CONFIG\"])\n        has_semantic_search = bool(current_app.config[\"VECTOR_EMBEDDING_MODEL\"])\n        has_chat = has_semantic_search and bool(current_app.config[\"LLM_MODEL\"])\n\n        try:\n            pytesseract.get_tesseract_version()\n            has_ocr = True\n            ocr_languages = [\n                lang for lang in pytesseract.get_languages() if lang != \"osd\"\n            ]\n        except pytesseract.TesseractNotFoundError:\n            has_ocr = False\n            ocr_languages = []\n        tree = get_tree_from_jwt()\n        searcher = get_search_indexer(tree)\n        search_count = searcher.count(\n            include_private=has_permissions({PERM_VIEW_PRIVATE})\n        )\n        sifts_info = {\n            \"version\": sifts.__version__,\n            \"count\": search_count,\n        }\n        if current_app.config.get(\"VECTOR_EMBEDDING_MODEL\"):\n            searcher_s = get_search_indexer(tree, semantic=True)\n            search_count_s = searcher_s.count(\n                include_private=has_permissions({PERM_VIEW_PRIVATE})\n            )\n            sifts_info[\"count_semantic\"] = search_count_s\n\n        result = {\n            \"database\": {\n                \"id\": db_handle.get_dbid(),\n                \"name\": db_name,\n                \"type\": db_type,\n            },\n            \"default_person\": db_handle.get_default_handle(),\n            \"gramps\": {\n                \"version\": ENV[\"VERSION\"],\n            },\n            \"gramps_webapi\": {\n                \"schema\": VERSION,\n                \"version\": VERSION,\n            },\n            \"gramps_ql\": {\"version\": gql.__version__},\n            \"object_ql\": {\"version\": oql.__version__},\n            \"locale\": {\n                \"lang\": GRAMPS_LOCALE.lang,\n                \"language\": GRAMPS_LOCALE.language[0],\n                \"description\": language_name,\n                \"incomplete_translation\": bool(\n                    GRAMPS_LOCALE.language[0] in INCOMPLETE_TRANSLATIONS\n                ),\n            },\n            \"object_counts\": {\n                \"people\": db_handle.get_number_of_people(),\n                \"families\": db_handle.get_number_of_families(),\n                \"sources\": db_handle.get_number_of_sources(),\n                \"citations\": db_handle.get_number_of_citations(),\n                \"events\": db_handle.get_number_of_events(),\n                \"media\": db_handle.get_number_of_media(),\n                \"places\": db_handle.get_number_of_places(),\n                \"repositories\": db_handle.get_number_of_repositories(),\n                \"notes\": db_handle.get_number_of_notes(),\n                \"tags\": db_handle.get_number_of_tags(),\n            },\n            \"researcher\": db_handle.get_researcher(),\n            \"search\": {\n                \"sifts\": sifts_info,\n            },\n            \"server\": {\n                \"multi_tree\": is_multi_tree,\n                \"task_queue\": has_task_queue,\n                \"ocr\": has_ocr,\n                \"ocr_languages\": ocr_languages,\n                \"semantic_search\": has_semantic_search,\n                \"chat\": has_chat,\n            },\n        }\n        if args[\"surnames\"]:\n            result[\"surnames\"] = db_handle.get_surname_list()\n        data = db_handle.get_summary()\n        db_version_key = GRAMPS_LOCALE.translation.sgettext(\"Database version\")\n        db_module_key = GRAMPS_LOCALE.translation.sgettext(\"Database module version\")\n        db_schema_key = GRAMPS_LOCALE.translation.sgettext(\"Schema version\")\n        for item in data:\n            if item == db_version_key:\n                result[\"database\"][\"version\"] = data[item]\n            elif item == db_module_key:\n                result[\"database\"][\"module\"] = data[item]\n            elif item == db_schema_key:\n                result[\"database\"][\"schema\"] = data[item]\n        result[\"database\"][\"actual_schema\"] = db_handle.get_schema_version()\n        return self.response(200, result)", "answer": "{}"}