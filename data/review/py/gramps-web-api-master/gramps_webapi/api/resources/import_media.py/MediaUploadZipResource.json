{"embedding": [0.3527059555053711, -0.3127745985984802, -0.9479078650474548, 0.6158058643341064, 0.6211980581283569, -0.3183051347732544, -0.013348783366382122, 0.8836605548858643, -0.5008823275566101, -0.10694000869989395, 0.8532024621963501, -0.16519932448863983, 0.12755894660949707, -0.5272625684738159, 0.05661663040518761, 0.15010283887386322, 0.3213241994380951, 0.2320312261581421, 0.4866656959056854, -0.06731155514717102, -0.24507611989974976, 0.04739443212747574, -0.1607481837272644, -9.032902744365856e-05, 0.3576045036315918, 0.7498783469200134, 0.16531944274902344, -0.464202344417572, 0.3490731120109558, -0.2079845368862152, 0.4925578236579895, 0.24427136778831482, 0.5518049001693726, 0.6847951412200928, 0.47621431946754456, -0.1550503373146057, -0.03473508730530739, 0.5039483904838562, -1.5271495580673218, -0.06340859085321426, 0.1945982724428177, 0.0024180375039577484, 0.8279274702072144, 0.0030950771179050207, 0.7384271621704102, 0.5204000473022461, -0.15481439232826233, -0.23919394612312317, 0.1320497691631317, 0.42146947979927063, 0.7321018576622009, 0.21408723294734955, 0.05041559785604477, 0.06027960404753685, 0.13674858212471008, 0.6235669851303101, -0.3402240574359894, 0.40624725818634033, -0.333905965089798, -0.2843514382839203, 0.06140050292015076, 0.4212782680988312, 0.7850966453552246, -0.5671759843826294, -0.27297917008399963, 0.39103904366493225, -0.34312355518341064, -0.29519128799438477, -0.07107826322317123, 0.359081506729126, -0.25766631960868835, -0.10461822152137756, 0.2509779632091522, 0.24005746841430664, 0.889921247959137, 0.24730491638183594, 0.2782691419124603, -0.06950744241476059, 0.08713942021131516, -0.15308524668216705, 0.5168054699897766, -1.1148064136505127, -0.24090276658535004, 0.09278622269630432, 0.30569329857826233, -0.08575998246669769, 0.5417690873146057, -1.0546104907989502, -1.1401814222335815, 0.1961061954498291, -0.26882317662239075, 0.5896340608596802, -0.4881838262081146, -0.3122371733188629, 0.21714092791080475, -0.6548880338668823, -0.4692158102989197, -0.11623737215995789, -0.5562172532081604, 0.05143919959664345, -0.4219195246696472, 0.0337301641702652, -0.14361467957496643, -0.1041618213057518, 0.7558899521827698, -0.5448168516159058, 0.222985178232193, -0.3940039277076721, -0.3991280496120453, 0.08404875546693802, 0.21099136769771576, -0.33110329508781433, -0.5884926915168762, 0.36453819274902344, -0.6151196360588074, -0.3784991204738617, 0.14547544717788696, 0.2492343783378601, 0.4067744314670563, -0.8374354243278503, 0.6539768576622009, -0.11681124567985535, 0.21357831358909607, -0.13130173087120056, 0.8034279942512512, 0.6316262483596802, 0.3178722560405731, -0.28986310958862305, -0.4285256564617157, 0.2412446290254593, -0.5840510725975037, 0.6805784106254578, -0.15607018768787384, 0.2278774529695511, -0.8248517513275146, 0.3359772861003876, 0.5379596948623657, 0.09044664353132248, -0.23836475610733032, 0.5959344506263733, 0.3361354470252991, 0.1032787635922432, 0.040411096066236496, 0.06659062951803207, -0.14099600911140442, -0.3227247893810272, -0.20468413829803467, -0.07061827182769775, -0.07469871640205383, 0.01904287002980709, 0.32457104325294495, -0.37850868701934814, 0.1770259439945221, 0.3700927197933197, 0.7889042496681213, 0.14212195575237274, -0.04094812273979187, 0.15600910782814026, 0.030979366973042488, -0.38521119952201843, -0.48184752464294434, 0.5294283628463745, -0.03307430446147919, 0.030593648552894592, 0.22724901139736176, -0.43112173676490784, 0.272198885679245, 0.3604000508785248, -0.15474173426628113, 0.2408560961484909, -0.3684675991535187, -0.010803444311022758, -0.05669242888689041, -0.05036831647157669, 0.12876330316066742, 0.10567690432071686, 0.3662126660346985, 0.1377592831850052, 0.2869654595851898, 0.11244536191225052, -0.34906020760536194, -0.2974890470504761, 0.34715741872787476, 0.5453771948814392, 0.35863441228866577, 0.5651021003723145, -0.30971717834472656, 0.38297393918037415, 0.3230924904346466, -0.46645280718803406, -0.41538527607917786, -0.057666510343551636, 0.08025739341974258, -0.5280993580818176, -0.8085787892341614, -0.26605719327926636, -0.08691186457872391, -0.704651415348053, 0.4862927496433258, -0.20720025897026062, -0.936825156211853, -0.25743308663368225, 0.660555899143219, -0.04294627532362938, -0.03194083273410797, 0.0347103625535965, 0.14741666615009308, 0.07165373116731644, -1.3807039260864258, 0.40054646134376526, 0.05463989078998566, 0.35001710057258606, -0.2260715216398239, 0.1598767787218094, 0.17818675935268402, -0.46312546730041504, 0.15054292976856232, 0.3219600021839142, 0.6127389073371887, 0.20579949021339417, 0.16465722024440765, 0.9184746146202087, -0.5160067677497864, -0.49625781178474426, 0.4368055760860443, -0.2569062411785126, 0.48015162348747253, -0.135896235704422, -1.4198538064956665, -0.23873993754386902, -0.4564938247203827, -0.4518665373325348, 0.5606853365898132, 0.04626252502202988, -0.7833243012428284, -0.006398869212716818, 0.5043892860412598, -0.4367896318435669, 0.12492374330759048, -0.045231252908706665, 0.6051309704780579, -0.5211724638938904, 0.06675106287002563, -0.834205150604248, -0.761565089225769, -0.13171052932739258, -0.24993553757667542, -0.06754608452320099, 0.21992990374565125, -0.900576651096344, 0.3728196918964386, 0.12305685877799988, -0.5604670643806458, -0.08613657206296921, 0.4550585448741913, 0.05221683904528618, 0.33402255177497864, -0.6104280352592468, 0.23720510303974152, -0.1884257197380066, -0.5740153789520264, -0.8726875185966492, -0.017760688439011574, 0.16277402639389038, 0.07756275683641434, -0.38881462812423706, -0.28361451625823975, -0.5632131695747375, -0.036936432123184204, 0.010082129389047623, 1.6256260871887207, 0.6004582643508911, -0.3917357921600342, -0.47213083505630493, -0.06669498234987259, -0.0864281952381134, -0.017372814938426018, 0.12782704830169678, -0.17502225935459137, -0.08550090342760086, -0.2328978329896927, -0.6839454770088196, 0.7274501919746399, 0.0018523047911003232, 0.9051787257194519, -0.19024738669395447, -0.01858947053551674, 0.40030527114868164, -0.49717336893081665, 0.0037900980096310377, 0.2077544927597046, 0.4465493857860565, -0.33277300000190735, -1.2433257102966309, -0.7288786172866821, -0.17562982439994812, -1.1657439470291138, -0.26074743270874023, 0.852692723274231, -0.14806930720806122, -0.5567425489425659, 0.2568682134151459, 0.6630569696426392, -0.1863245666027069, -0.40388989448547363, -0.04507562890648842, 0.47753995656967163, 0.11525999754667282, -0.6425988078117371, 0.18967294692993164, 0.31233489513397217, -0.02383572608232498, -0.024373510852456093, -0.7191958427429199, -0.05354783311486244, 0.9549647569656372, 0.5906565189361572, 1.3504071235656738, -0.1570848822593689, 0.5442154407501221, -0.609015166759491, 0.5635231137275696, 0.18351173400878906, 0.09428379684686661, 1.2786593437194824, -0.0642353743314743, -0.2412974238395691, 0.01968464069068432, -0.25010359287261963, 0.6410515904426575, -0.5352646112442017, 0.7676903605461121, -0.47657233476638794, 0.019491439685225487, -0.2112528681755066, -0.18121370673179626, 0.00639009103178978, -0.8801347613334656, 0.28660160303115845, -0.041810113936662674, -0.09967391192913055, -0.26749807596206665, 0.2387649416923523, 0.5288076996803284, -1.1144312620162964, -0.009870091453194618, 0.6272251009941101, 0.24651366472244263, 0.07264354079961777, -0.279669851064682, 0.4717337191104889, 0.00998016633093357, 0.1092962920665741, -0.0635829046368599, 0.07726909220218658, -0.9928084015846252, -0.2230626940727234, -0.15089482069015503, -0.15220236778259277, 0.11810511350631714, -0.3381829857826233, 0.17262594401836395, 0.026320284232497215, 0.44927945733070374, 0.11316319555044174, -0.5886332988739014, 0.11333497613668442, -0.050957001745700836, -0.34152519702911377, 0.0006771691842004657, 0.10224277526140213, -0.05868220329284668, -0.6164035201072693, -0.04022924229502678, 0.27913305163383484, 0.18379522860050201, -0.15807747840881348, -0.801665186882019, -0.4074919521808624, 0.11531531810760498, -0.17852674424648285, 0.6940776109695435, -0.0868520438671112, 0.14618200063705444, -0.30636489391326904, -0.5115492343902588, -0.41874372959136963, -0.3345363140106201, -0.4518962800502777, 0.8360622525215149, 0.6582276225090027, -0.5465890765190125, 0.02059601992368698, -0.1450941115617752, -0.03277619555592537, -0.5294577479362488, -0.625163197517395, 0.19874149560928345, 0.4474022686481476, 0.10130124539136887, 0.032132383435964584, -0.13478852808475494, 0.12308935075998306, 0.6084559559822083, 0.29585984349250793, -0.1418232023715973, 0.730994462966919, -0.4980334937572479, 0.4041447639465332, 0.1811351478099823, 0.2850961685180664, -0.6088086366653442, 0.2832256853580475, -0.16051310300827026, -0.22417773306369781, 0.26439547538757324, -0.4295259416103363, -0.1542266309261322, -0.10896015167236328, -0.23993873596191406, 0.5580835938453674, 0.9125202894210815, 0.7959775328636169, -0.5513085722923279, -0.17193390429019928, -0.7259569764137268, 0.059900637716054916, -0.10406066477298737, -1.0505372285842896, -0.3472059667110443, 0.4098706543445587, 0.5388237833976746, -0.12221659719944, -0.18580476939678192, 0.7603225111961365, 0.21004335582256317, 0.0409766286611557, 0.04377323016524315, 0.17317786812782288, 0.32433199882507324, -0.08342050760984421, 0.07727822661399841, 0.30505701899528503, -0.5890341997146606, 0.2980765402317047, -0.16142308712005615, -0.5338946580886841, 0.5946502089500427, 0.6661794781684875, -0.26222455501556396, -0.22558675706386566, 0.17108877003192902, -0.11723741143941879, -0.34145015478134155, -0.39870744943618774, -0.47283101081848145, 1.1892168521881104, -0.5785500407218933, -0.8080523014068604, -0.42567744851112366, 0.7651011347770691, -0.015460641123354435, 0.3409871459007263, -0.8764681220054626, 0.1168314516544342, -0.123382568359375, 0.23033785820007324, 0.07443845272064209, 0.12101862579584122, -0.11802128702402115, 0.6988892555236816, 0.14815789461135864, -0.42055341601371765, 0.36288073658943176, 0.013415577821433544, 0.5943359732627869, 0.6023687124252319, 0.6796663403511047, -0.26299887895584106, 0.07932639867067337, 0.44221797585487366, -0.22867287695407867, 0.13630039989948273, 0.49077466130256653, -0.18350793421268463, -0.13984310626983643, 0.7566920518875122, 0.11663790047168732, 0.6455997824668884, -0.48449474573135376, 0.5834977030754089, 0.2768973112106323, -0.09565532207489014, 0.9375532865524292, -0.4819682836532593, -0.6877778172492981, -0.38887307047843933, 0.46102163195610046, 0.2452482432126999, -0.1266542226076126, 0.505053699016571, -0.6934928894042969, -0.1954263597726822, 0.032698336988687515, 0.07506328821182251, 0.8044196963310242, -0.06652890145778656, -0.6652292013168335, 0.3765795826911926, -0.02690231427550316, -0.7187867164611816, -0.055510081350803375, -0.3255234360694885, -0.3041445314884186, 0.06324810534715652, 0.6509755849838257, -0.26167476177215576, 1.0676050186157227, 0.40574392676353455, -0.12609462440013885, 0.22740305960178375, -0.3335147798061371, 0.20366378128528595, 0.06419049203395844, -0.513737678527832, 0.024129582569003105, -0.07236599922180176, -0.4117652177810669, -0.018442444503307343, 0.9626860022544861, -0.5970854163169861, -0.21505026519298553, 0.03068290837109089, -1.008730173110962, -0.027024054899811745, 0.637396514415741, -1.1246311664581299, -0.23162372410297394, -0.2913106679916382, -0.5067998766899109, -0.5434935688972473, 0.44143661856651306, -0.4402492046356201, -0.8145771026611328, -0.5054774880409241, 0.13995850086212158, -0.21579432487487793, 0.03055667132139206, 0.27127283811569214, -0.5499270558357239, -0.11209116876125336, 0.03339468315243721, 0.5172736644744873, 0.34666383266448975, -0.10158206522464752, 0.3145110011100769, -0.3247060179710388, -1.1009013652801514, -0.4765244126319885, 0.01884307898581028, 0.2729376554489136, 0.7841858863830566, -0.283312052488327, 0.1192232221364975, -0.30760857462882996, 0.3781675100326538, 0.6353151798248291, -0.3193046748638153, -0.1668340414762497, 0.004195351619273424, -0.31319373846054077, -0.17733319103717804, 0.31196287274360657, -0.059715259820222855, 0.5668676495552063, 0.04330568015575409, 0.30562829971313477, 0.0843416079878807, 0.6980225443840027, -0.03646835312247276, 0.6126121282577515, -0.13438953459262848, 0.15204329788684845, -1.4432685375213623, -0.6715642213821411, -0.2975219488143921, 0.4423988461494446, 0.4722650647163391, 0.28894245624542236, 0.41090795397758484, -0.5277730226516724, -0.07498981058597565, 0.11744406074285507, -0.1214003786444664, 0.0671660453081131, 0.03281393274664879, -0.2940983474254608, -0.3207733929157257, -0.14358511567115784, 0.3748692274093628, 0.14768190681934357, -0.11849086731672287, -0.5972493886947632, -0.43902695178985596, 0.1986730992794037, 0.4512885510921478, -0.8673483729362488, -0.9390791654586792, -0.6723002195358276, 0.2824007570743561, -0.4946722388267517, -1.0465800762176514, 0.015005459077656269, 0.15841373801231384, 0.37498611211776733, -0.044136688113212585, -1.475412368774414, 0.2999739348888397, 0.43375909328460693, -0.3644189238548279, -0.006060212850570679, -0.14840760827064514, -0.1493954360485077, 0.08960402756929398, -0.07002875953912735, 0.8920194506645203, 0.23438261449337006, 0.2496257722377777, -0.7554053664207458, 0.4142453670501709, -0.07068949192762375, -0.0788174718618393, 0.9980205297470093, 0.599205493927002, 0.5105637311935425, -0.45254701375961304, -0.18399283289909363, 0.041792746633291245, 0.7196270227432251, -0.5818690061569214, 0.6505084037780762, -0.5780095458030701, -0.5874621868133545, -0.4896537661552429, -0.21367496252059937, 0.08860873430967331, 0.43534114956855774, -0.8700916767120361, -0.2657950520515442, -0.3919496536254883, -0.3374776840209961, 0.7831459641456604, -0.3080480396747589, -0.06309744715690613, -0.2130066156387329, 0.1309325098991394, 0.41594403982162476, -0.31042349338531494, -0.04626890644431114, 0.12989510595798492, 0.07610630244016647, -0.3086060583591461, 0.02298528142273426, 0.18934832513332367, 0.05012817680835724, -0.1460326462984085, 0.0631401464343071, -0.4837043881416321, 0.02198941819369793, 0.2006622701883316, 0.127171128988266, 0.18257416784763336, 0.491582453250885, -0.10859183222055435, -0.012111648917198181, 0.4289337694644928, 0.2679304778575897, -0.3596276044845581, -0.2185782939195633, 0.4222259521484375, -0.07402288913726807, -0.17582042515277863, 0.42942485213279724, 1.3797433376312256, -0.24326607584953308, 0.19569143652915955, 0.19514742493629456, -0.30282050371170044, 0.24726919829845428, -0.15314671397209167, 0.5803441405296326, -0.009830158203840256, -0.05917884409427643, -0.11227510869503021, -1.1751128435134888, -0.18493641912937164, 0.027185669168829918, 0.044647034257650375, 0.3068123757839203, -0.008729597553610802, 0.2302437126636505, -0.8594521284103394, 0.6485702991485596, 0.04123042896389961, -0.31824323534965515, 0.08773095160722733, -0.6901779174804688, -0.07381904870271683, 0.46570703387260437, -0.12166569381952286, 0.2544928789138794, 0.48998767137527466, 0.4640159010887146, -0.024493731558322906, -0.12107802927494049, 0.4670657813549042, -0.013295385986566544, -0.011749763041734695, 0.42025285959243774, -0.35349738597869873, -0.6499004364013672, -0.26606452465057373, -0.25262466073036194, -0.0025503465440124273, 0.13342724740505219, -0.7036454081535339, -0.4158646762371063, 0.4146260619163513, 0.41939765214920044, 0.19085676968097687, 0.445229172706604, 0.19212943315505981, -0.3081165552139282, 0.08496269583702087, 0.40668216347694397, -0.20330628752708435, 0.032259751111269, 0.27356359362602234, -0.202456995844841, 0.4060685932636261, 0.21580086648464203, -0.2053738385438919, -0.42513078451156616, -0.07172837853431702, 0.7340452075004578, 0.4154469072818756, 0.9145489931106567, -0.069211944937706, -0.5615943074226379, 0.1318310797214508, 0.44383081793785095, -0.09756126254796982, -0.3400436043739319, 0.9676634669303894, -0.07366203516721725, -0.04993787407875061, 0.07950584590435028, -0.018103405833244324, -0.5319417715072632, -0.3264743685722351, -0.5760751366615295, -0.4031488001346588, -0.6318594217300415, -0.21948131918907166, 0.5647119283676147, 1.0162347555160522, 0.12600143253803253, 0.3477948307991028], "query": "class MediaUploadZipResource(ProtectedResource):\n\n    \"\"\"Resource for uploading an archive of media files.\"\"\"\n\n    def post(self) -> Response:\n        \"\"\"Upload an archive of media files.\"\"\"\n        require_permissions([PERM_IMPORT_FILE])\n        request_stream = request.stream\n\n        # we use EXPORT_DIR as location to store the temporary file\n        export_path = current_app.config[\"EXPORT_DIR\"]\n        os.makedirs(export_path, exist_ok=True)\n        file_name = f\"{uuid.uuid4()}.zip\"\n        file_path = os.path.join(export_path, file_name)\n\n        with open(file_path, \"w+b\") as ftmp:\n            chunk_size = 4 * 1024  # reading in 4 KB chunks\n            while True:\n                chunk = request_stream.read(chunk_size)\n                if not chunk:\n                    break\n                ftmp.write(chunk)\n\n        if os.path.getsize(file_path) == 0:\n            abort_with_message(400, \"Imported file is empty\")\n\n        try:\n            with zipfile.ZipFile(file_path) as zip_file:\n                zip_file.namelist()\n        except zipfile.BadZipFile:\n            abort_with_message(400, \"The uploaded file is not a valid ZIP file.\")\n\n        tree = get_tree_from_jwt()\n        user_id = get_jwt_identity()\n        task = run_task(\n            import_media_archive,\n            tree=tree,\n            user_id=user_id,\n            file_name=file_path,\n            delete=True,\n        )\n        if isinstance(task, AsyncResult):\n            return make_task_response(task)\n        return jsonify(task), 201", "answer": "{}"}