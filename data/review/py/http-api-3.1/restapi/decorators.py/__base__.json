{"embedding": [-0.12183291465044022, -0.9304129481315613, -0.11625992506742477, 0.15011316537857056, 0.44952380657196045, 0.48978015780448914, -0.23399347066879272, 0.014018728397786617, -0.6358402967453003, -0.34173867106437683, 0.38573157787323, 0.18315571546554565, 0.020941682159900665, -0.20258189737796783, -0.047724995762109756, 0.5803998708724976, 0.5750457644462585, 0.310433030128479, 0.6578159928321838, -0.9039497375488281, 0.3483930826187134, -0.2209559679031372, 0.0024318359792232513, -0.04868728667497635, 0.24504782259464264, 0.6887998580932617, 0.20316608250141144, -0.17053718864917755, 0.7596917152404785, -0.31189408898353577, 0.15231242775917053, -0.5374458432197571, 0.4321556091308594, 0.414041668176651, 0.7141748666763306, -0.5177246332168579, 0.37097784876823425, 0.6513425707817078, -0.8770257234573364, 0.021717619150877, -0.19163908064365387, 0.021276891231536865, 0.02411835268139839, -0.3551402688026428, 0.7443792223930359, 0.7758297920227051, 0.07805327326059341, 0.8198095560073853, 0.033769331872463226, -0.03788061812520027, 0.052427250891923904, -0.27082520723342896, 0.7587369680404663, 0.425099641084671, 0.7594313025474548, -0.08182737231254578, -0.06830911338329315, 0.641280472278595, -0.002879480831325054, 0.23368626832962036, -0.05414050072431564, 0.3481603264808655, 0.032876886427402496, -0.07410190999507904, 0.1555003821849823, 0.11321467161178589, -0.7529748678207397, -0.025460021570324898, -0.3644087612628937, -0.05244644358754158, -0.005762769840657711, -0.3945324122905731, -0.09817495942115784, -0.0207440834492445, 0.32968100905418396, -0.6284646391868591, 0.5007547736167908, -0.5223446488380432, 0.603068470954895, -0.4852989912033081, 0.3767179250717163, -0.4021390676498413, -0.5988330245018005, -0.1685490757226944, 1.2765164375305176, -0.06548143923282623, -0.2922031283378601, -0.2206428200006485, -0.10917951911687851, 0.6772474050521851, -0.9415910840034485, 0.014725477434694767, -0.16412200033664703, -0.054983243346214294, 0.24381574988365173, -0.4857390224933624, -0.19833700358867645, -0.2840690612792969, 0.8043315410614014, -0.12483692914247513, 0.06627827882766724, -0.22621655464172363, 0.07825825363397598, 0.5462908744812012, 0.27821189165115356, -0.6359420418739319, -0.20354841649532318, -0.08326619118452072, -0.4032995402812958, 0.003404285293072462, 0.13721150159835815, -0.3910420835018158, -0.28398674726486206, -0.3124651312828064, -0.10909358412027359, 0.4118872284889221, 0.34916362166404724, -0.14287255704402924, 0.4232412278652191, -0.11652182787656784, 0.32284295558929443, -0.37495264410972595, -0.0998939499258995, -0.26081451773643494, 0.45307210087776184, 0.23288828134536743, 0.16418202221393585, 0.6630904078483582, -0.09171608090400696, -0.5038277506828308, -0.48905715346336365, 0.2942650020122528, -0.6325768232345581, 0.6470244526863098, 0.20792876183986664, -0.007636312860995531, 0.052232664078474045, 0.20283560454845428, -0.6027382612228394, 0.6514570713043213, -0.16320452094078064, 0.684870719909668, -0.20918063819408417, -0.5214710235595703, -0.36937859654426575, -0.4800425171852112, 0.29957151412963867, -0.441928893327713, 0.2629600465297699, -0.376821368932724, 0.585098922252655, -0.27462655305862427, -0.2626512944698334, -0.07306823134422302, -0.2486104667186737, -0.1277591437101364, -0.09785623848438263, -0.01025322824716568, 0.16885247826576233, -0.6884772777557373, -0.6022896766662598, -0.46803203225135803, 0.4031895697116852, -1.1567085981369019, 0.14111310243606567, 0.1490844190120697, 0.04977041482925415, -0.5414412021636963, -0.07011934369802475, 0.7671617865562439, -0.10995782166719437, 0.10248948633670807, -0.007567405700683594, -0.11791593581438065, 0.29547420144081116, 0.7068448066711426, 0.38428711891174316, -0.4370034337043762, -0.14385256171226501, -0.2386080026626587, 0.5896114706993103, -0.6253515481948853, -0.6538479328155518, -0.003316919319331646, 0.05927296727895737, 0.6854610443115234, -0.2576179802417755, -0.030089857056736946, -0.14678777754306793, 0.13033045828342438, -0.17426538467407227, 0.4977123737335205, 0.9535024762153625, 0.13772058486938477, -0.7694826722145081, 0.03893278166651726, -0.33814340829849243, 0.421073853969574, 0.6569352746009827, -0.5327092409133911, -0.34199339151382446, 0.28630372881889343, 0.33117321133613586, 0.08939912170171738, 0.03980057314038277, 0.23243236541748047, 0.4869007170200348, -0.11523793637752533, -0.9117823839187622, -0.4225548803806305, -0.22521795332431793, -0.11575708538293839, 0.04355925694108009, -0.2820885181427002, -0.19468599557876587, -0.21440130472183228, 0.5090091228485107, 0.024764183908700943, 0.25780561566352844, 0.2136049121618271, 1.0841550827026367, 0.3343324065208435, 0.2092030942440033, -0.4631611108779907, 0.5845265984535217, 0.19518247246742249, 0.36417776346206665, -0.16154317557811737, -0.1415877342224121, -0.4169422686100006, -0.47474905848503113, 0.03640447184443474, 0.533168613910675, 0.627365231513977, 0.3292551636695862, -0.364554762840271, 0.5035692453384399, 0.3450673520565033, 0.3578106760978699, -0.009263330139219761, 0.8075439929962158, 0.36695361137390137, 0.1480085700750351, -0.4679127335548401, -0.6582768559455872, 0.23670609295368195, 0.052057746797800064, 0.14561758935451508, -0.028692888095974922, -0.7485441565513611, 0.08074590563774109, 0.40059900283813477, -0.04209621995687485, 0.08823081105947495, -0.2667679488658905, -0.47304511070251465, 0.028241459280252457, -0.6336477994918823, 0.28010261058807373, -0.2281094789505005, -0.23369713127613068, -0.2820737957954407, -0.26085221767425537, 0.7341176867485046, 0.17393578588962555, -0.2815232276916504, 0.24006962776184082, -0.004990171175450087, -0.12067624926567078, -0.05876215919852257, 0.8142766952514648, 0.4496387541294098, 0.10635742545127869, 0.2500852346420288, -0.13306111097335815, -0.32064640522003174, 0.011046514846384525, -0.3231379985809326, -0.3679227828979492, -0.29785895347595215, 0.35157862305641174, -0.6608821153640747, 0.4120044410228729, 0.17918041348457336, 0.5771201252937317, -0.186001718044281, -0.27952343225479126, 0.4759067893028259, -0.16728107631206512, -0.39211350679397583, 0.573931097984314, -0.3660144805908203, 0.012746310792863369, -0.16667532920837402, -0.16570477187633514, 0.31733274459838867, -0.7903497815132141, -0.6292031407356262, 0.43637481331825256, -1.1294918060302734, -0.18924765288829803, -0.006230270490050316, 0.8463476896286011, 0.19334807991981506, 0.7201451063156128, -0.4380139708518982, 0.7824936509132385, -0.29733988642692566, -0.3876711130142212, 0.10788889229297638, 0.11948186159133911, 0.38147300481796265, -0.6517034769058228, -0.5569720268249512, -0.002675146795809269, -0.032145317643880844, -0.2839775085449219, 0.4035143554210663, -0.006702155340462923, 0.8087016344070435, -0.49796754121780396, 0.6887573003768921, 0.20124691724777222, -0.1629287600517273, 0.7947999238967896, -0.030802873894572258, 0.1506097912788391, -0.11999157071113586, -0.23890450596809387, -0.0022759921848773956, -0.7798753976821899, -0.18771496415138245, 0.014773751609027386, 0.33244574069976807, -0.6569497585296631, -0.14872370660305023, -0.3417336344718933, -0.6263023018836975, -0.2362774759531021, 0.06512212753295898, 0.2550796866416931, -0.2579374611377716, 0.1536131203174591, 0.4099515676498413, -0.903595507144928, -0.41335329413414, 0.7743595838546753, -0.26277491450309753, 0.5750413537025452, -0.0853327140212059, 0.46309515833854675, -0.32023516297340393, 0.26697397232055664, 0.6936697959899902, 1.0494834184646606, -0.7090184688568115, -0.5992739796638489, -0.3654940128326416, 0.06039177253842354, -0.28974616527557373, 0.5028039216995239, -0.4570833444595337, -0.3386256694793701, 0.3188658058643341, 0.3371729254722595, 0.6147915720939636, 0.04881748557090759, -0.143998920917511, 0.15179486572742462, -0.34565430879592896, -0.19478754699230194, -0.8021679520606995, -0.12426183372735977, -0.44495099782943726, 0.05368945375084877, -0.4461338520050049, -0.24194201827049255, 0.4708147943019867, -1.4514518976211548, 0.9495099782943726, 0.284412145614624, 0.6355199217796326, 0.009436349384486675, -0.09720016270875931, 0.6116659045219421, -0.12576965987682343, -0.18474599719047546, -0.285115510225296, -0.26683303713798523, 0.17008212208747864, 0.28196457028388977, -0.18058238923549652, -0.3222740888595581, -0.09049375355243683, 0.15123403072357178, -0.3811279833316803, -0.050892699509859085, 0.5098249912261963, 0.24894872307777405, -0.47493982315063477, 0.7632254362106323, -0.6965994834899902, 1.2810086011886597, 0.5711625814437866, 0.5781130790710449, -0.13119801878929138, 0.969127357006073, 0.3125331699848175, 0.271413654088974, 1.541162371635437, -0.2536550760269165, -0.6829324960708618, -0.48951008915901184, -0.20367982983589172, 0.22955432534217834, -0.14621569216251373, 0.0035472819581627846, 0.056208495050668716, -0.33175569772720337, 0.03233817219734192, 0.6579403877258301, -0.04752133786678314, 0.181194007396698, 0.41067883372306824, -0.10260830074548721, 0.3514891564846039, -0.6424652338027954, 0.08732512593269348, -0.37259340286254883, 0.5097895264625549, 0.24104100465774536, -0.24674655497074127, -0.7373598217964172, -0.41947343945503235, 0.08380109071731567, -0.26764652132987976, 0.12775518000125885, -0.009685100987553596, 0.4984738528728485, 0.09752000868320465, 0.17422258853912354, 0.37339121103286743, 0.0017359682824462652, -0.24768748879432678, 0.02476796880364418, 0.020636647939682007, -0.6257696151733398, 0.6373422741889954, 1.0470962524414062, -0.39090725779533386, 0.5322945713996887, -0.27875059843063354, 0.2726861834526062, 0.23037773370742798, -0.7358729243278503, -0.7935470938682556, 0.5085076689720154, -0.07259197533130646, -0.6026406288146973, 0.17390722036361694, 0.4445355236530304, -0.4199698865413666, -0.7982717156410217, -0.2873387932777405, 0.18263250589370728, 0.4481986165046692, 0.30257055163383484, 0.1265416443347931, -0.6240777373313904, 0.3804897367954254, 0.45377448201179504, -0.5674768686294556, -0.44768092036247253, 0.20417150855064392, 0.1265651434659958, 0.3749157190322876, 0.8181402087211609, -0.05253802239894867, -0.3547050952911377, 0.1922839730978012, 0.5093401074409485, -0.2528051435947418, -0.29450374841690063, 0.3116709291934967, 0.3281875252723694, -0.34592998027801514, 0.033095091581344604, 0.19932466745376587, -0.13955166935920715, -0.015308557078242302, -0.024938760325312614, 0.4409945011138916, 0.42102891206741333, 0.18089155852794647, -0.18786665797233582, 0.2348315268754959, 0.5697529315948486, -0.02916201949119568, 0.7024533748626709, -0.14906972646713257, -0.12500011920928955, -0.5725880861282349, 0.11073030531406403, -0.041013963520526886, 0.183852881193161, -0.16707248985767365, -0.6758443713188171, -0.4349781274795532, -0.31678590178489685, -0.24145974218845367, -0.22095917165279388, 0.20278684794902802, 0.4363260865211487, 0.6171947717666626, -0.26969027519226074, 0.008876643143594265, 0.2508946657180786, 0.5941147208213806, -0.49195027351379395, -0.3197813928127289, 0.7846936583518982, 0.41663819551467896, 0.700791597366333, -0.10847695916891098, 0.3968289792537689, 0.007765238638967276, 0.6180307269096375, -0.5768860578536987, 0.24780230224132538, 0.534615159034729, -0.22931604087352753, 0.29405924677848816, -0.06684399396181107, -0.34137800335884094, 0.0031555192545056343, 0.18922261893749237, -0.8081367015838623, -0.6130855679512024, 0.7074735164642334, -0.19130665063858032, 0.33443066477775574, 0.9305835366249084, -0.7085992097854614, -0.3632381856441498, -0.3702795207500458, -0.8411757349967957, 0.03938375785946846, -0.4024706482887268, -0.08352896571159363, -0.8412122130393982, -0.3665771484375, -0.25875014066696167, 0.7028958201408386, 0.0021215309388935566, -0.8397352695465088, -0.42230743169784546, 0.2301565557718277, -0.0018784397980198264, -0.016841229051351547, 0.2948586046695709, -0.4295503497123718, 0.677264392375946, -0.20886056125164032, -0.13321225345134735, -0.09299122542142868, 0.5986605882644653, 0.3452973961830139, 0.0028213048353791237, -1.0956931114196777, -0.5669617652893066, -0.501386821269989, 0.32655492424964905, 0.06864628940820694, -0.3852377235889435, -0.34006884694099426, 0.41692405939102173, 0.3298813998699188, -0.42662590742111206, 0.5582485198974609, -0.726389467716217, 0.30453720688819885, -0.15764348208904266, -0.1277216374874115, -1.218274712562561, -0.036515671759843826, 0.026814265176653862, 0.29616183042526245, 0.9791058301925659, 0.07297597825527191, 0.10830025374889374, -0.8350433111190796, -0.09763823449611664, -0.35085761547088623, -0.5094617605209351, -0.13764551281929016, 0.8079283237457275, -0.6593583226203918, 0.06625697761774063, 0.06639867275953293, 0.04769039526581764, -0.8197778463363647, 0.7109071016311646, 0.012757845222949982, -0.6986347436904907, 0.0744258388876915, -0.177085280418396, -0.23568375408649445, 0.08966449648141861, -0.019322238862514496, -0.12717434763908386, -0.0021028367336839437, 0.2543521523475647, -0.06578420102596283, -0.14564862847328186, -0.16175994277000427, -0.42333361506462097, -0.6212781071662903, 0.6258657574653625, 0.8624311089515686, -0.5900852680206299, -0.18267115950584412, 0.022519107908010483, 0.1429884284734726, 0.21474623680114746, -0.6070476174354553, 0.25373774766921997, 0.006732184439897537, -0.5772702693939209, -0.08067489415407181, -0.37108856439590454, 0.1642981320619583, 0.16417720913887024, 0.3834019601345062, -0.19282317161560059, 0.8439736366271973, -0.4974042475223541, 0.4224541485309601, 0.003564152866601944, -0.3121757209300995, 0.0325324609875679, 0.6412864923477173, -0.7486615777015686, -0.26627835631370544, 0.07173698395490646, 0.044501714408397675, 0.7677478790283203, -0.1710413545370102, -1.1463658809661865, 1.0923432111740112, 0.022086214274168015, -0.05184772610664368, 1.2048351764678955, -0.16710257530212402, 0.10103826224803925, -0.29715821146965027, 0.06201614812016487, -0.23690271377563477, -0.41665542125701904, 0.6137925386428833, -0.11849622428417206, 0.1605231910943985, -0.3936094343662262, 0.41574710607528687, -0.4245225489139557, -0.4528985917568207, 0.16233554482460022, -0.0250544436275959, -0.5056193470954895, 0.40217217803001404, 0.4237496554851532, 0.00858344417065382, -0.23818448185920715, 0.17049209773540497, 0.054990097880363464, 0.08581525832414627, -0.27734899520874023, -0.30296969413757324, -0.0634128525853157, -0.4179547131061554, 0.21844220161437988, -0.5158557295799255, -0.16066183149814606, -0.36637255549430847, 0.6308854818344116, -0.8788636326789856, -0.17952029407024384, 0.1221887543797493, -0.18491649627685547, -0.04256398603320122, -0.19246067106723785, 0.5768892765045166, -0.5521201491355896, 0.26127055287361145, -0.1804569512605667, -0.8067803978919983, -0.838919997215271, -0.9795106053352356, -0.8931395411491394, 0.1756581962108612, -0.06547815352678299, 0.14320017397403717, 0.2867668569087982, 0.10301343351602554, -0.14725182950496674, 0.23831835389137268, 0.48062509298324585, -0.07665210217237473, -0.913105845451355, -0.3419613838195801, -0.08452654629945755, 0.33476585149765015, 0.47838979959487915, 1.152395486831665, -0.9451144933700562, 0.2338676005601883, 0.10745079070329666, 0.08828191459178925, 0.5598287582397461, 0.30923882126808167, 0.16942642629146576, -0.2665458619594574, 0.39740779995918274, 0.21644119918346405, -0.6048642992973328, 0.06096576899290085, -0.5981931090354919, -0.38145938515663147, 0.12066500633955002, 0.31706658005714417, -0.21246083080768585, 0.3943689167499542, -0.06166183575987816, -0.7119707465171814, 0.36189180612564087, 0.5260715484619141, -0.9960522055625916, 0.32213351130485535, -0.34642401337623596, -0.3705875873565674, -0.6447791457176208, 0.147700235247612, 0.3624599277973175, -0.7375355958938599, 0.31086862087249756, 0.7178795337677002, 0.5784006118774414, 0.6280068159103394, -0.12341706454753876, 0.3585670590400696, -0.07461215555667877, 0.10500463843345642, 0.666504979133606, -0.676234245300293, 0.044255051761865616, -0.4503374695777893, -0.6053930521011353, 0.2899555265903473, 0.5587727427482605, -0.2357926219701767, -0.48583105206489563, -0.6631529331207275, -0.44864562153816223, -0.1191294863820076, -0.4603108763694763, 1.2911263704299927, 0.7629615068435669, -0.2558113932609558, 0.34991592168807983], "query": "\"\"\"\n\n\nDecorators used to configure endpoints with metadata, authentication, caching\n, pagination, input validation, output serialization, etc\n\"\"\"\n\n\nimport inspect\n\nfrom functools import wraps\n\nfrom typing import (\n\n    Any,\n\n    Callable,\n\n    Optional,\n\n    Union,\n\n    cast,\n\n    get_args,\n\n    get_origin,\n\n    get_type_hints,\n\n)\n\n\nimport werkzeug.exceptions\n\nfrom amqp.exceptions import AccessRefused  # type: ignore\n\nfrom flask import request\n\nfrom flask_apispec import marshal_with  # also imported from endpoints\n\nfrom flask_apispec import use_kwargs as original_use_kwargs\n\nfrom marshmallow import post_load\n\nfrom sentry_sdk import capture_exception\n\n\nfrom restapi.config import API_URL, AUTH_URL, SENTRY_URL\n\nfrom restapi.connectors import Connector\n\nfrom restapi.exceptions import RestApiException, ServerError\n\nfrom restapi.models import PartialSchema, fields, validate\n\nfrom restapi.rest.annotations import inject_apispec_docs\n\nfrom restapi.rest.bearer import TOKEN_VALIDATED_KEY\n\nfrom restapi.rest.bearer import HTTPTokenAuth as auth  # imported as alias for endpoints\n\nfrom restapi.rest.definition import EndpointResource, Response\n\nfrom restapi.types import EndpointFunction\n\nfrom restapi.utilities import print_and_exit\n\nfrom restapi.utilities.globals import mem\n\nfrom restapi.utilities.logs import log\n\nfrom restapi.utilities.uuid import getUUID\n\n\nlog.debug(\"Auth loaded {}\", auth)\n\nlog.debug(\"Marshal loaded {}\", marshal_with)\n\n\n\n# same definition as in:\n\n# https://github.com/jmcarp/flask-apispec/blob/master/flask_apispec/annotations.py\n\n\ndef use_kwargs(\n\n    args: Optional[Any],\n\n    location: Optional[str] = None,\n\n    inherit: Optional[Any] = None,\n\n    apply: Optional[Any] = None,\n\n    **kwargs: Optional[Any],\n\n) -> Any:\n\n    # this use_kwargs is used override the default location (json)\n\n    # with a more extensive default location (body)\n\n    # This trick will prevent to add location='body' to mostly all models\n\n    # Please note that body is also used as \"in\" parameter in swagger specs\n\n    <BODY use_kwargs>\n\n\ndef endpoint(\n\n    path: str,\n\n    summary: Optional[str] = None,\n\n    description: Optional[str] = None,\n\n    responses: Optional[dict[Union[str, int], str]] = None,\n\n    **kwargs: Any,\n\n) -> Callable[[EndpointFunction], EndpointFunction]:\n\n    <BODY endpoint>\n\n\ndef match_types(static_type: Any, runtime_value: Any) -> bool:\n\n    # parameters annotated as Any are always accepted, regardless the runtime type\n\n    <BODY match_types>\n\n\n# This function takes as input the callback function signature and extracts from both\n\n# view_args and kwargs the corresponding parameters to be injected at runtime\n\n# If the parameter is not found in view_args and kwargs or it is found with a wrong\n\n# type, then a None is returned and the preload decorator will raise a ServerError\n\n# REVIEW: \u0414\u043b\u0438\u043d\u043d\u0430\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u044f, \u043c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u043e \u0443\u0441\u043b\u043e\u0432\u0438\u0439\ndef inject_callback_parameters(\n\n    callback_fn: Callable[..., Optional[Any]],\n\n    kwargs: dict[str, Any],\n\n    view_args: Optional[dict[str, Any]],\n\n) -> Optional[dict[str, Any]]:\n\n    <BODY inject_callback_parameters>\n\n\n# The callback is expected to have a first argument of type EndpointResource and then\n\n# optional additional parameters automatically injected from kwargs and url parameters\n\n# I can't define with mypy something like:\n\n# Callable[[EndpointResource, ...],\n\ndef preload(\n\n    callback: Callable[..., dict[str, Any]]\n\n) -> Callable[[EndpointFunction], EndpointFunction]:\n\n    <BODY preload>\n\n\ndef cache_response_filter(response: Response) -> bool:\n\n    <BODY cache_response_filter>\n\n\ndef make_cache_function_name(name: str) -> str:\n\n    <BODY make_cache_function_name>\n\n\ndef cache(*args: Any, **kwargs: Any) -> Any:\n\n    <BODY cache>\n\n# REVIEW: \u0414\u043b\u0438\u043d\u043d\u0430\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u044f, \u043c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u043e \u0443\u0441\u043b\u043e\u0432\u0438\u0439\ndef database_transaction(func: EndpointFunction) -> EndpointFunction:\n\n    <BODY database_transaction>\n\n\nclass Pagination(PartialSchema):\n\n    <BODY Pagination>\n\n\ndef get_pagination(func: EndpointFunction) -> EndpointFunction:\n\n    <BODY get_pagination>\n\n\nclass ChunkUpload(PartialSchema):\n\n    <BODY ChunkUpload>\n\n\ndef init_chunk_upload(func: EndpointFunction) -> EndpointFunction:\n\n    <BODY init_chunk_upload>\n\n\n# This decorator is automatically added to every endpoints... do not use it explicitly\n\ndef catch_exceptions(**kwargs: Any) -> Callable[[EndpointFunction], EndpointFunction]:\n\n    <BODY catch_exceptions>", "answer": "{}"}